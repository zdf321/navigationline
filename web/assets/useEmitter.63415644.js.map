{"version":3,"file":"useEmitter.63415644.js","sources":["../../src/components/SimpleDialog/SimpleDialog.vue","../../node_modules/mitt/dist/mitt.mjs","../../src/utils/useEmitter.ts"],"sourcesContent":["<template>\n\t<el-dialog\n\t\tv-model=\"simpleVisible\"\n\t\tdestroy-on-close\n\t\t:title=\"title\"\n\t\t:width=\"width\"\n\t\tdraggable\n\t\tappend-to-body\n    :close-on-click-modal=\"false\"\n\t>\n\t\t<slot></slot>\n\t\t<template #footer v-if=\"footer\">\n\t\t\t<span class=\"dialog-footer\">\n\t\t\t\t<el-button @click=\"simpleVisible = false\">取消</el-button>\n\t\t\t\t<el-button type=\"primary\" @click=\"handleDialogSure\">确定</el-button>\n\t\t\t</span>\n\t\t</template>\n\t</el-dialog>\n</template>\n\n<script setup lang=\"ts\">\n\timport { ref, watch, unref, computed } from 'vue'\n\timport { ElDialog, ElButton } from 'element-plus'\n\tconst props = withDefaults(\n\t\tdefineProps<{\n\t\t\tvisible: boolean\n\t\t\ttitle: string\n\t\t\twidth?: string\n\t\t\tfooter?: boolean\n\t\t}>(),\n\t\t{\n\t\t\tvisible: false,\n\t\t\twidth: '500px',\n\t\t\tfooter: true\n\t\t}\n\t)\n\tconst simpleVisible = ref<boolean>(false)\n\n\t// const emit = defineEmits<{\n\t// \t(e: 'update:visible', value: boolean): void\n\t// }>()\n\n\tconst emit = defineEmits(['update:visible', 'confirm'])\n\tconst footerPadding = computed(() => (props.footer ? '20px' : 0))\n\n\twatch(\n\t\t() => unref(simpleVisible),\n\t\tval => {\n\t\t\temit('update:visible', val)\n\t\t}\n\t)\n\twatch(\n\t\t() => props.visible,\n\t\tval => {\n\t\t\tsimpleVisible.value = val\n\t\t}\n\t)\n\n\tfunction handleDialogSure() {\n\t\temit('confirm')\n\t}\n</script>\n<style>\n\t.el-dialog__footer {\n\t\tpadding: v-bind(footerPadding);\n\t}\n  .el-dialog__body {\n    padding-top: 10px;\n    padding-bottom: 10px;\n  }\n</style>\n","export default function(n){return{all:n=n||new Map,on:function(t,e){var i=n.get(t);i?i.push(e):n.set(t,[e])},off:function(t,e){var i=n.get(t);i&&(e?i.splice(i.indexOf(e)>>>0,1):n.set(t,[]))},emit:function(t,e){var i=n.get(t);i&&i.slice().map(function(n){n(e)}),(i=n.get(\"*\"))&&i.slice().map(function(n){n(t,e)})}}}\n//# sourceMappingURL=mitt.mjs.map\n","import mitt from 'mitt'\nimport { onMounted } from 'vue'\n\nconst emitter = mitt()\n\nexport function useEmit(fn_name, param?) {\n\temitter.emit(fn_name, param)\n}\n\nexport function useOnEmitFn(fn_name, fn) {\n\tonMounted(() => {\n\t\temitter.on(fn_name, (param) => {\n\t\t\t// console.log('??', fn)\n\t\t\tfn(param)\n\t\t})\n\t})\n}\n\nexport function useOnEmitFnForWait(fn_name) {\n  return new Promise((resolve) => {\n    emitter.on(fn_name, (data) => {\n      resolve(data);\n    });\n  });\n}\n\nexport function useOffEmitFn(fn_name, fn?) {\n\temitter.off(fn_name)\n}\n\nexport default emitter\n"],"names":["props","__props","simpleVisible","ref","emit","__emit","footerPadding","computed","watch","unref","val","handleDialogSure","mitt","n","e","i","emitter","useEmit","fn_name","param","useOnEmitFn","fn","onMounted","useOnEmitFnForWait","resolve","data","useOffEmitFn"],"mappings":"+YAuBC,MAAMA,EAAQC,EAaRC,EAAgBC,EAAa,EAAK,EAMlCC,EAAOC,EACPC,EAAgBC,EAAS,IAAOP,EAAM,OAAS,OAAS,CAAE,EAEhEQ,EACC,IAAMC,EAAMP,CAAa,EAClBQ,GAAA,CACNN,EAAK,iBAAkBM,CAAG,CAC3B,CAAA,EAEDF,EACC,IAAMR,EAAM,QACLU,GAAA,CACNR,EAAc,MAAQQ,CACvB,CAAA,EAGD,SAASC,GAAmB,CAC3BP,EAAK,SAAS,CACf,qiBC5Dc,SAAAQ,EAASC,EAAE,CAAC,MAAM,CAAC,IAAIA,EAAEA,GAAG,IAAI,IAAI,GAAG,SAAS,EAAEC,EAAE,CAAC,IAAIC,EAAEF,EAAE,IAAI,CAAC,EAAEE,EAAEA,EAAE,KAAKD,CAAC,EAAED,EAAE,IAAI,EAAE,CAACC,CAAC,CAAC,CAAC,EAAE,IAAI,SAAS,EAAEA,EAAE,CAAC,IAAIC,EAAEF,EAAE,IAAI,CAAC,EAAEE,IAAID,EAAEC,EAAE,OAAOA,EAAE,QAAQD,CAAC,IAAI,EAAE,CAAC,EAAED,EAAE,IAAI,EAAE,EAAE,EAAE,EAAE,KAAK,SAAS,EAAEC,EAAE,CAAC,IAAIC,EAAEF,EAAE,IAAI,CAAC,EAAEE,GAAGA,EAAE,QAAQ,IAAI,SAAS,EAAE,CAAC,EAAED,CAAC,CAAC,CAAC,GAAGC,EAAEF,EAAE,IAAI,GAAG,IAAIE,EAAE,MAAO,EAAC,IAAI,SAAS,EAAE,CAAC,EAAE,EAAED,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CCGzT,MAAME,EAAUJ,EAAK,EAEL,SAAAK,EAAQC,EAASC,EAAQ,CAChCH,EAAA,KAAKE,EAASC,CAAK,CAC5B,CAEgB,SAAAC,EAAYF,EAASG,EAAI,CACxCC,EAAU,IAAM,CACPN,EAAA,GAAGE,EAAUC,GAAU,CAE9BE,EAAGF,CAAK,CAAA,CACR,CAAA,CACD,CACF,CAEO,SAASI,EAAmBL,EAAS,CACnC,OAAA,IAAI,QAASM,GAAY,CACtBR,EAAA,GAAGE,EAAUO,GAAS,CAC5BD,EAAQC,CAAI,CAAA,CACb,CAAA,CACF,CACH,CAEgB,SAAAC,EAAaR,EAASG,EAAK,CAC1CL,EAAQ,IAAIE,CAAO,CACpB"}
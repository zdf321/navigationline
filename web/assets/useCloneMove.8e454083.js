var _=(e,i,n)=>new Promise((p,d)=>{var E=r=>{try{h(n.next(r))}catch(u){d(u)}},U=r=>{try{h(n.throw(r))}catch(u){d(u)}},h=r=>r.done?p(r.value):Promise.resolve(r.value).then(E,U);h((n=n.apply(e,i)).next())});import{K as t,$ as s,d as z,r as q,a as G,b as K,e as x,c as P,g as A,o as c,l as m,k as y,i as l,w as f,a3 as J,t as N,m as F,f as B,ax as Q,j as b,F as X,R as I,E as T}from"./index.dcc91eec.js";import{a as Y,b as g,u as Z}from"./useEmitter.63415644.js";import{u as ee}from"./files.d698779e.js";function te(e){return t({url:"/api/v1/my/data/clone",method:"post",data:e})}function Ce(e){return t({url:"/api/v1/my/data/getWebsiteInfo",method:"get",params:{url:e}})}function ye(e){return t({url:"/api/v1/my/data/loadDatas",method:"get",params:e,headers:s})}function ae(e){return t({url:"/api/v1/my/data/move",method:"post",data:e})}function be(e){return t({url:"/api/v1/my/data/removeFromTrash",method:"post",data:e})}function ge(e){return t({url:"/api/v1/my/data/restore",method:"post",data:e,headers:s})}function De(e){return t({url:"/api/v1/my/data/saveFolder",method:"post",data:e,headers:s})}function _e(e){return t({url:"/api/v1/my/data/saveSort",method:"post",data:e})}function Fe(e){return t({url:"/api/v1/my/data/saveWebsite",method:"post",data:e,headers:s})}function Ie(e){return t({url:"/api/v1/my/data/toTrash",method:"post",data:e})}function Ee(e){return t({url:"/api/v1/file/uploadUserWebsiteLogo",method:"post",data:e,headers:{"Content-Type":"multipart/form-data"}})}function Ue(e){return t({url:"/api/v1/my/data/getFileCount",method:"get",params:{teamId:e},headers:s})}function Te(e){return t({url:"/api/v1/team/nav/getCommonUseList",method:"get",params:e,headers:s})}function ke(e){return t({url:"/api/v1/team/nav/getRecentOpenList",method:"get",params:e,headers:s})}function oe(e){return t({url:"/api/v1/team/nav/getDirTree",method:"get",params:e,headers:s})}function se(){return t({url:"/api/v1/team/nav/getAllDirTree",method:"get",headers:s})}function we(e){return t({url:"/api/v1/team/nav/addCommonUse",method:"post",data:e,headers:s})}function Me(e){return t({url:"/api/v1/team/nav/addCommonUsePublish",method:"post",data:e,headers:s})}function Re(e){return t({url:"/api/v1/team/nav/removeCommonUse",method:"post",data:e,headers:s})}function Le(e){return t({url:"/api/v1/team/nav/removeCommonUsePublish",method:"post",data:e,headers:s})}function Se(e){return t({url:"/api/v1/team/nav/addOpenHistory",method:"post",data:e,headers:s})}function xe(e){return t({url:"/api/v1/team/nav/getWebsiteDetail",method:"get",params:e,headers:s})}const ne={class:"folder-tree",id:"folder-tree"},re={class:"flex items-center"},ue={key:0,class:"gray-text"},le={key:1,class:"custom-tree-node w-full flex items-center justify-between"},ie={class:"flex items-center"},de={key:0,class:"gray-text"},ce={key:0,class:"flex justify-end mt-10"},me={key:1,class:"flex justify-end mt-10"},Ae=z({__name:"CloneMove",props:{dataIds:{},isCollect:{type:Boolean},itemId:{},showAllDir:{type:Boolean}},emits:["formResponse"],setup(e,{emit:i}){const n=e,p={children:"children",label:"label"},d=q([]),E=G(),U=ee(),{currentRoute:h}=K(),r=x(()=>{if([`${I.SELF_FILE}/${I.HIDE_CHILDREN_IN_MENU}`,`${I.TEAM}/${I.HIDE_CHILDREN_IN_MENU}`].indexOf(B(h).path)<0)return"";let a=U.getFolderBreadcrumb;return a&&a.length>0?a[a.length-1].id:""}),u=P({folderId:"",spaceId:"",dataIds:n.dataIds}),O=x(()=>{var o;return(o=n.dataIds)==null?void 0:o.includes(u.folderId)}),D=i;function W(){R(),D("formResponse",!0)}function k(o){return o.dirId==="root"?o.spaceType=="MINE"?"menu-self-file":o.spaceType=="PUBLIC"?"space-public":"space-private":"list-folder"}function j(){$(),D("formResponse",!1)}function w(){D("formResponse",!1)}function H(){if(!u.folderId){T.warning("\u8BF7\u9009\u62E9\u76EE\u5F55");return}R("\u6536\u85CF\u6210\u529F"),D("formResponse",!0)}function V(o){u.folderId=o.dirId,u.spaceId=o.spaceId}function M(){return _(this,null,function*(){const{data:o}=n.showAllDir?yield se():yield oe({teamId:E.getActiveTeamId});d.value=o})}M(),Y("handleUpdateTreeData",M);function R(o="\u590D\u5236\u6210\u529F"){return _(this,null,function*(){const{status:a}=yield te(u);a==1&&(T.success(o),g("handleUpdateList"),g("handleUpdateMultipleList"))})}function $(){return _(this,null,function*(){yield ae(u),T.success("\u79FB\u52A8\u6210\u529F"),g("handleUpdateList"),g("handleUpdateMultipleList")})}return(o,a)=>{const L=A("SvgIcon"),v=A("el-button");return c(),m(X,null,[y("div",ne,[l(B(Q),{"empty-text":"\u6682\u65E0\u6570\u636E",accordion:"",data:d.value,props:p,onNodeClick:V},{default:f(({node:S,data:C})=>[C.disable?(c(),m("div",{key:0,class:"custom-tree-node w-full flex items-center justify-between",style:{cursor:"not-allowed"},onClick:a[0]||(a[0]=J(()=>{},["stop"]))},[y("span",re,[l(L,{name:k(C),size:18,class:"mr-1"},null,8,["name"]),y("span",null,N(S.label),1)]),C.value===r.value?(c(),m("span",ue," \u5F53\u524D\u76EE\u5F55 ")):F("",!0)])):(c(),m("div",le,[y("span",ie,[l(L,{name:k(C),size:18,class:"mr-1"},null,8,["name"]),y("span",null,N(S.label),1)]),C.value===r.value?(c(),m("span",de," \u5F53\u524D\u76EE\u5F55 ")):F("",!0)]))]),_:1},8,["data"])]),o.isCollect?F("",!0):(c(),m("div",ce,[l(v,{type:"primary",onClick:W},{default:f(()=>a[1]||(a[1]=[b("\u590D\u5236")])),_:1}),l(v,{type:"primary",disabled:O.value,onClick:j},{default:f(()=>a[2]||(a[2]=[b("\u79FB\u52A8")])),_:1},8,["disabled"]),l(v,{onClick:w},{default:f(()=>a[3]||(a[3]=[b("\u53D6\u6D88")])),_:1})])),o.isCollect?(c(),m("div",me,[l(v,{type:"primary",onClick:H},{default:f(()=>a[4]||(a[4]=[b("\u6536\u85CF")])),_:1}),l(v,{onClick:w},{default:f(()=>a[5]||(a[5]=[b("\u53D6\u6D88")])),_:1})])):F("",!0)],64)}}});function Ne(e="\u79FB\u52A8/\u590D\u5236\u5230"){const i=P({visible:!1,title:e});function n(){i.visible=!0,Z("handleUpdateTreeData"),g("handleUpdateTreeData")}function p(d){d&&console.log("\u64CD\u4F5C\u6210\u529F\u540E..."),i.visible=!1}return{cloneMoveData:i,handleCloneMoveVisible:n,handleCloneMoveRes:p}}export{Ae as _,Se as a,De as b,oe as c,Ee as d,Fe as e,xe as f,Ce as g,Ie as h,ge as i,be as j,Re as k,Le as l,we as m,Me as n,_e as o,ae as p,Ue as q,ye as r,Te as s,ke as t,Ne as u};
//# sourceMappingURL=useCloneMove.8e454083.js.map

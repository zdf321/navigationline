{"version":3,"file":"index.5e46ee98.js","sources":["../../src/api/fetchs/tools.ts","../../src/views/tools-online/index.vue"],"sourcesContent":["import { headers } from '@/consts'\r\nimport { CollectParams, ToolNavParams, ToolSearchParams } from '../model/toolsModel'\r\nimport request from '../request'\r\n\r\n/* 收藏 需登录 */\r\nexport function fetchCollect(data: CollectParams) {\r\n\treturn request({\r\n\t\turl: `/api/v1/tool/collect`,\r\n\t\tmethod: 'post',\r\n\t\tdata,\r\n\t\theaders\r\n\t})\r\n}\r\n/* 获取导航分类 */\r\nexport function fetchCategoryList() {\r\n\treturn request({\r\n\t\turl: `/api/v1/tool/loadCategory`,\r\n\t\tmethod: 'get',\r\n\t\theaders\r\n\t})\r\n}\r\n/* 获取工具导航数据 */\r\nexport function fetchToolNavList(params: ToolNavParams) {\r\n\treturn request({\r\n\t\turl: `/api/v1/tool/loadTool`,\r\n\t\tmethod: 'get',\r\n\t\tparams,\r\n\t\theaders\r\n\t})\r\n}\r\n/* 搜索工具 */\r\nexport function fetchToolSearch(params: ToolSearchParams) {\r\n\treturn request({\r\n\t\turl: `/api/v1/tool/searchTool`,\r\n\t\tmethod: 'get',\r\n\t\tparams,\r\n\t\theaders\r\n\t})\r\n}\r\n","<template>\r\n\t<div class=\"tools-online-container h-full\">\r\n\t\t<div class=\"tools-header flex flex-col justify-center items-center\">\r\n\t\t\t<p class=\"search-title text-center\">打造安全、快捷、免费的在线工具箱</p>\r\n\t\t\t<div class=\"tools-search\">\r\n\t\t\t\t<el-input\r\n\t\t\t\t\tsize=\"large\"\r\n\t\t\t\t\tv-model=\"search\"\r\n\t\t\t\t\tclearable\r\n\t\t\t\t\tplaceholder=\"搜索需要的工具(如：图片传输、png转jpg)\"\r\n\t\t\t\t\t@clear=\"handleClear\"\r\n\t\t\t\t\t@change=\"handleChange\"\r\n\t\t\t\t>\r\n\t\t\t\t\t<template #append>\r\n\t\t\t\t\t\t<el-button @click=\"getSearchList\">\r\n\t\t\t\t\t\t\t<SvgIcon name=\"handle-query-search\" :size=\"20\" class=\"handle-query-search\" />\r\n\t\t\t\t\t\t</el-button>\r\n\t\t\t\t\t</template>\r\n\t\t\t\t</el-input>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t\t<div class=\"tools-content flex\">\r\n\t\t\t<div class=\"left-menu\">\r\n\t\t\t\t<SingleMenu\r\n\t\t\t\t\t:default-key=\"menuDefaultKey\"\r\n\t\t\t\t\t:menus=\"menus\"\r\n\t\t\t\t\tclass=\"h-full\"\r\n\t\t\t\t\t@handleChange=\"handleMenuChange\"\r\n\t\t\t\t/>\r\n\t\t\t</div>\r\n\t\t\t<div class=\"right-content flex-1\" v-loading=\"loading\">\r\n\t\t\t\t<el-scrollbar>\r\n\t\t\t\t\t<BasicRow :list=\"list\" />\r\n\t\t\t\t</el-scrollbar>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t</div>\r\n</template>\r\n\r\n<script setup lang=\"ts\">\r\n\timport type { MenuProps } from '@/components/SingleMenu/useSingleMenu'\r\n\timport SingleMenu from '@/components/SingleMenu/SingleMenu.vue'\r\n\timport BasicRow from '@/components/BasicCard/BaiscRow.vue'\r\n\timport { ref, reactive, computed } from 'vue'\r\n\timport { CardItem } from '@/components/BasicCard/types'\r\n\timport { fetchCategoryList, fetchToolNavList, fetchToolSearch } from '@/api/fetchs/tools'\r\n\r\n\tconst search = ref<string | undefined>('')\r\n\tconst isSearch = ref<boolean>(false)\r\n\tconst menus = ref<MenuProps[]>([])\r\n\tconst menuDefaultKey = ref<string | number>('')\r\n\tconst loading = ref<boolean>(true)\r\n\tconst list = ref<CardItem[]>([])\r\n\tconst listQuery = reactive({\r\n\t\tpid: 'root'\r\n\t})\r\n\r\n\tconst activeMenu = computed(() => {\r\n\t\tif (menus.value.length > 0) {\r\n\t\t\treturn menus.value.find(v => v.value === listQuery.pid)\r\n\t\t} else {\r\n\t\t\treturn {\r\n\t\t\t\ttext: ''\r\n\t\t\t}\r\n\t\t}\r\n\t})\r\n\r\n\tfunction handleMenuChange(menu) {\r\n\t\tsearch.value = ''\r\n\t\tisSearch.value = false\r\n\t\tlistQuery.pid = menu.value\r\n\t\tsearch.value ? getSearchList() : getList()\r\n\t}\r\n\r\n\tfunction handleClear() {\r\n\t\tisSearch.value = false\r\n\t\tsetDefaultMenuValue()\r\n\t\tgetList()\r\n\t}\r\n\r\n\tfunction handleChange(val) {\r\n\t\tif (val) {\r\n\t\t\tgetSearchList()\r\n\t\t} else {\r\n\t\t\tisSearch.value = false\r\n\t\t\tsetDefaultMenuValue()\r\n\t\t\tgetList()\r\n\t\t}\r\n\t}\r\n\r\n\tfunction setDefaultMenuValue() {\r\n\t\tmenuDefaultKey.value = menus.value.length > 0 ? menus.value[0].value : 'root'\r\n\t}\r\n\r\n\t/* ================================== fetchs ================================== */\r\n\tasync function getCategoryList() {\r\n\t\tconst { data } = await fetchCategoryList()\r\n\t\tmenus.value = data.map(v => ({\r\n\t\t\ticon: v.icon || 'tool-default',\r\n\t\t\tvalue: v.id,\r\n\t\t\ttext: v.name\r\n\t\t}))\r\n\t\tmenus.value.length > 0 && (listQuery.pid = menus.value[0].value as string)\r\n\t\tsetDefaultMenuValue()\r\n\t\tgetList()\r\n\t}\r\n\r\n\tgetCategoryList()\r\n\tasync function getList() {\r\n\t\tconst { data } = await fetchToolNavList(listQuery)\r\n\t\tlist.value = data\r\n\t\tloading.value = false\r\n\t}\r\n\tasync function getSearchList() {\r\n\t\tloading.value = true\r\n\t\tconst { data } = await fetchToolSearch({ pid: listQuery.pid, search: search.value })\r\n\t\t// const clist = data.find(v => {\r\n\t\t// \treturn v.categoryName === unref(activeMenu)?.text\r\n\t\t// })\r\n\t\tisSearch.value = true\r\n\t\tmenuDefaultKey.value = ''\r\n\t\tlist.value = data.length ? data[0].childs : []\r\n\t\tconsole.log('listlistlist:', list.value)\r\n\t\tloading.value = false\r\n\t}\r\n</script>\r\n\r\n<style lang=\"scss\">\r\n\t$--tools-header-height: 230px;\r\n\t.tools-online-container {\r\n\t\tbackground-color: $--content-bg-color;\r\n\t\t.tools-header {\r\n\t\t\theight: $--tools-header-height;\r\n\t\t\tbackground-color: #1696d4;\r\n\t\t\tcolor: $--white-color;\r\n\t\t\t.search-title {\r\n\t\t\t\tfont-size: 26px;\r\n\t\t\t\tmargin-bottom: 20px;\r\n\t\t\t}\r\n\t\t\t.tools-search {\r\n\t\t\t\twidth: 460px;\r\n\t\t\t\t.handle-query-search {\r\n\t\t\t\t\tcolor: $--white-color;\r\n\t\t\t\t}\r\n\r\n\t\t\t\t.el-input-group__append {\r\n\t\t\t\t\tbackground-color: var(--el-color-primary);\r\n\t\t\t\t\tbox-shadow: 0 1px 0 0 var(--el-color-primary) inset,\r\n\t\t\t\t\t\t0 -1px 0 0 var(--el-color-primary) inset, -1px 0 0 0 var(--el-color-primary) inset;\r\n\t\t\t\t\t.el-button {\r\n\t\t\t\t\t\tmargin: 0 -10px;\r\n\t\t\t\t\t\tpadding: 5px 15px;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\t.tools-content {\r\n\t\t\theight: calc(100% - #{$--tools-header-height});\r\n\t\t\t.left-menu {\r\n\t\t\t\twidth: 150px;\r\n\t\t\t\theight: 100%;\r\n\t\t\t\tpadding-left: 20px;\r\n\t\t\t\tbackground-color: $--white-color;\r\n\t\t\t}\r\n\t\t\t.right-content {\r\n\t\t\t\theight: 100%;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n</style>\r\n"],"names":["fetchCategoryList","request","headers","fetchToolNavList","params","fetchToolSearch","search","ref","isSearch","menus","menuDefaultKey","loading","list","listQuery","reactive","computed","v","handleMenuChange","menu","getSearchList","getList","handleClear","setDefaultMenuValue","handleChange","val","getCategoryList","__async","data"],"mappings":"iwBAcO,SAASA,GAAoB,CACnC,OAAOC,EAAQ,CACd,IAAK,4BACL,OAAQ,MACR,QAAAC,CAAA,CACA,CACF,CAEO,SAASC,EAAiBC,EAAuB,CACvD,OAAOH,EAAQ,CACd,IAAK,wBACL,OAAQ,MACR,OAAAG,EACA,QAAAF,CAAA,CACA,CACF,CAEO,SAASG,EAAgBD,EAA0B,CACzD,OAAOH,EAAQ,CACd,IAAK,0BACL,OAAQ,MACR,OAAAG,EACA,QAAAF,CAAA,CACA,CACF,iQCSO,MAAAI,EAASC,EAAwB,EAAE,EACnCC,EAAWD,EAAa,EAAK,EAC7BE,EAAQF,EAAiB,CAAA,CAAE,EAC3BG,EAAiBH,EAAqB,EAAE,EACxCI,EAAUJ,EAAa,EAAI,EAC3BK,EAAOL,EAAgB,CAAA,CAAE,EACzBM,EAAYC,EAAS,CAC1B,IAAK,MAAA,CACL,EAEkBC,EAAS,IACvBN,EAAM,MAAM,OAAS,EACjBA,EAAM,MAAM,QAAUO,EAAE,QAAUH,EAAU,GAAG,EAE/C,CACN,KAAM,EAAA,CAGR,EAED,SAASI,EAAiBC,EAAM,CAC/BZ,EAAO,MAAQ,GACfE,EAAS,MAAQ,GACjBK,EAAU,IAAMK,EAAK,MACdZ,EAAA,MAAQa,EAAc,EAAIC,EAAQ,CAC1C,CAEA,SAASC,GAAc,CACtBb,EAAS,MAAQ,GACGc,IACZF,GACT,CAEA,SAASG,EAAaC,EAAK,CACtBA,EACWL,KAEdX,EAAS,MAAQ,GACGc,IACZF,IAEV,CAEA,SAASE,GAAsB,CACfZ,EAAA,MAAQD,EAAM,MAAM,OAAS,EAAIA,EAAM,MAAM,GAAG,MAAQ,MACxE,CAGA,SAAegB,GAAkB,QAAAC,EAAA,sBAChC,KAAM,CAAE,KAAAC,CAAA,EAAS,MAAM3B,IACjBS,EAAA,MAAQkB,EAAK,IAAUX,IAAA,CAC5B,KAAMA,EAAE,MAAQ,eAChB,MAAOA,EAAE,GACT,KAAMA,EAAE,IACP,EAAA,EACFP,EAAM,MAAM,OAAS,IAAMI,EAAU,IAAMJ,EAAM,MAAM,GAAG,OACtCa,IACZF,GACT,GAEgBK,IAChB,SAAeL,GAAU,QAAAM,EAAA,sBACxB,KAAM,CAAE,KAAAC,CAAS,EAAA,MAAMxB,EAAiBU,CAAS,EACjDD,EAAK,MAAQe,EACbhB,EAAQ,MAAQ,EACjB,GACA,SAAeQ,GAAgB,QAAAO,EAAA,sBAC9Bf,EAAQ,MAAQ,GAChB,KAAM,CAAE,KAAAgB,CAAA,EAAS,MAAMtB,EAAgB,CAAE,IAAKQ,EAAU,IAAK,OAAQP,EAAO,KAAO,CAAA,EAInFE,EAAS,MAAQ,GACjBE,EAAe,MAAQ,GACvBE,EAAK,MAAQe,EAAK,OAASA,EAAK,GAAG,OAAS,GACpC,QAAA,IAAI,gBAAiBf,EAAK,KAAK,EACvCD,EAAQ,MAAQ,EACjB"}
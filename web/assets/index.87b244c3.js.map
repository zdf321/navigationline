{"version":3,"file":"index.87b244c3.js","sources":["../../src/layout/default/index.vue"],"sourcesContent":["<template>\n  <el-scrollbar>\n    <ElContainer class=\"app-layout-container\" direction=\"vertical\">\n      <el-affix v-if=\"showHeader\">\n        <Header />\n      </el-affix>\n      <Content />\n      <Footer v-if=\"showFooter\"/>\n    </ElContainer>\n  </el-scrollbar>\n</template>\n\n<script setup lang=\"ts\">\n\timport { ElContainer } from 'element-plus'\n\timport Header from '@/layout/default/header/index.vue'\n\timport Content from '@/layout/default/content/index.vue'\n  import Footer from '@/layout/default/footer/index.vue'\n  import {useRouter} from \"vue-router\";\n  import {computed, inject, ref, unref, watch} from \"vue\";\n  import {RouteEnum} from \"@/enums/routeEnum\";\n  import {useUserStore} from \"@/store/modules/user\";\n  import {getToken} from \"@/utils\";\n\n  const { currentRoute } = useRouter()\n  let showHeader = ref(false)\n  let showFooter = ref(false)\n\n  const showHeaderMenuPaths = [\n    `${RouteEnum.BASIC_ROOT}/${RouteEnum.HIDE_CHILDREN_IN_MENU}`,\n    `${RouteEnum.SELF_FILE}/${RouteEnum.HIDE_CHILDREN_IN_MENU}`,\n    `${RouteEnum.TEAM}/${RouteEnum.HIDE_CHILDREN_IN_MENU}`,\n    `${RouteEnum.INVITATION_ERROR}/${RouteEnum.HIDE_CHILDREN_IN_MENU}`,\n    `${RouteEnum.TOS}/${RouteEnum.HIDE_CHILDREN_IN_MENU}`,\n    `${RouteEnum.ABOUT}/${RouteEnum.HIDE_CHILDREN_IN_MENU}`,\n    `${RouteEnum.UPGRADE}/${RouteEnum.HIDE_CHILDREN_IN_MENU}`,\n    `${RouteEnum.ERROR_404}/${RouteEnum.HIDE_CHILDREN_IN_MENU}`,\n    `${RouteEnum.SETTING}/${RouteEnum.HIDE_CHILDREN_IN_MENU}`,\n  ]\n\n  const showFooterMenuPaths = [\n    `${RouteEnum.BASIC_ROOT}/${RouteEnum.HIDE_CHILDREN_IN_MENU}`,\n    `${RouteEnum.TOS}/${RouteEnum.HIDE_CHILDREN_IN_MENU}`,\n    `${RouteEnum.ABOUT}/${RouteEnum.HIDE_CHILDREN_IN_MENU}`,\n    `${RouteEnum.UPGRADE}/${RouteEnum.HIDE_CHILDREN_IN_MENU}`,\n    `${RouteEnum.ERROR_404}/${RouteEnum.HIDE_CHILDREN_IN_MENU}`,\n  ]\n\n  watch(\n    [() => unref(currentRoute).path],\n    () => {\n      const showHead = computed(\n        () =>\n          showHeaderMenuPaths.indexOf(unref(currentRoute).path) > -1\n      )\n      showHeader.value = unref(showHead)\n\n      const showFoot = computed(\n        () =>\n          showFooterMenuPaths.indexOf(unref(currentRoute).path) > -1\n      )\n      showFooter.value = unref(showFoot)\n    },\n    {\n      immediate: true\n    }\n  )\n\n  useAutoLogin()\n\n  function useAutoLogin() {\n    let cookies = inject('$cookies')\n    let token = getToken(window.location.hash)\n    if(!token) {\n      return\n    }\n\n    // @ts-ignore\n    cookies.config(\"7d\")\n    // @ts-ignore\n    cookies.set(\"x-access-token\",token);\n\n    const userStore = useUserStore()\n    userStore.oauthLogin()\n  }\n</script>\n"],"names":["currentRoute","useRouter","showHeader","ref","showFooter","showHeaderMenuPaths","RouteEnum","showFooterMenuPaths","watch","unref","showHead","computed","showFoot","useAutoLogin","cookies","inject","token","getToken","useUserStore"],"mappings":"y5BAuBQ,KAAA,CAAE,aAAAA,GAAiBC,IACrB,IAAAC,EAAaC,EAAI,EAAK,EACtBC,EAAaD,EAAI,EAAK,EAE1B,MAAME,EAAsB,CAC1B,GAAGC,EAAU,cAAcA,EAAU,wBACrC,GAAGA,EAAU,aAAaA,EAAU,wBACpC,GAAGA,EAAU,QAAQA,EAAU,wBAC/B,GAAGA,EAAU,oBAAoBA,EAAU,wBAC3C,GAAGA,EAAU,OAAOA,EAAU,wBAC9B,GAAGA,EAAU,SAASA,EAAU,wBAChC,GAAGA,EAAU,WAAWA,EAAU,wBAClC,GAAGA,EAAU,aAAaA,EAAU,wBACpC,GAAGA,EAAU,WAAWA,EAAU,uBAAA,EAG9BC,EAAsB,CAC1B,GAAGD,EAAU,cAAcA,EAAU,wBACrC,GAAGA,EAAU,OAAOA,EAAU,wBAC9B,GAAGA,EAAU,SAASA,EAAU,wBAChC,GAAGA,EAAU,WAAWA,EAAU,wBAClC,GAAGA,EAAU,aAAaA,EAAU,uBAAA,EAGtCE,EACE,CAAC,IAAMC,EAAMT,CAAY,EAAE,IAAI,EAC/B,IAAM,CACJ,MAAMU,EAAWC,EACf,IACEN,EAAoB,QAAQI,EAAMT,CAAY,EAAE,IAAI,EAAI,EAAA,EAEjDE,EAAA,MAAQO,EAAMC,CAAQ,EAEjC,MAAME,EAAWD,EACf,IACEJ,EAAoB,QAAQE,EAAMT,CAAY,EAAE,IAAI,EAAI,EAAA,EAEjDI,EAAA,MAAQK,EAAMG,CAAQ,CACnC,EACA,CACE,UAAW,EACb,CAAA,EAGWC,IAEb,SAASA,GAAe,CAClB,IAAAC,EAAUC,EAAO,UAAU,EAC3BC,EAAQC,EAAS,OAAO,SAAS,IAAI,EACzC,GAAG,CAACD,EACF,OAIFF,EAAQ,OAAO,IAAI,EAEXA,EAAA,IAAI,iBAAiBE,CAAK,EAEhBE,IACR,WAAW,CACvB"}
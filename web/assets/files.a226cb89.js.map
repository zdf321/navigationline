{"version":3,"file":"files.a226cb89.js","sources":["../../src/store/modules/files.ts"],"sourcesContent":["import {\n\tFILE_LIST_VIEW_TYPE__KEY,\n\tFOLDER_BREADCRUMB_KEY,\n} from '@/enums/keyEnum'\nimport { useLocalStorage } from '@/utils/cache'\nimport { defineStore } from 'pinia'\nimport { FileItem } from '@/components/ContentElement/types'\nimport {useTeamStore} from \"@/store/modules/team\";\n\nconst teamStore = useTeamStore()\n\nexport type ViewType = 'list' | 'menu'\ninterface FilesState {\n\tviewType: ViewType\n\tfolderBreadcrumb: Partial<FileItem>[]\n\tenterId: string\n\tstartItem: Recordable\n\tpointOffset: Recordable\n\tenterType: string\n\tevents: Recordable\n\tisClick: boolean\n}\n\nexport const useFilesStore = defineStore({\n\tid: 'store-files',\n\tstate: (): FilesState => ({\n\t\tviewType: useLocalStorage.get(FILE_LIST_VIEW_TYPE__KEY) || 'menu',\n\t\tfolderBreadcrumb: useLocalStorage.get(FOLDER_BREADCRUMB_KEY) || [],\n\t\tevents: {\n\t\t\tisClick: false,\n\t\t\tisDrag: false\n\t\t},\n\t\tstartItem: {},\n\t\tenterId: '',\n\t\tpointOffset: {\n\t\t\tx: -999,\n\t\t\ty: -999\n\t\t},\n\t\tenterType: 'file',\n\t\tisClick: true\n\t}),\n\tgetters: {\n\t\tgetFileListViewType(): ViewType {\n\t\t\treturn this.viewType\n\t\t},\n\t\tgetFolderBreadcrumb(): Partial<FileItem>[] {\n\t\t\treturn this.folderBreadcrumb\n\t\t},\n\t\tgetStartItem(): Recordable {\n\t\t\treturn this.startItem\n\t\t},\n\t\tgetEnterId(): string {\n\t\t\treturn this.enterId\n\t\t},\n\t\tgetPointOffset(): Recordable {\n\t\t\treturn this.pointOffset\n\t\t},\n\t\tgetEnterType(): string {\n\t\t\treturn this.enterType\n\t\t},\n\t\tgetEvents(): Recordable {\n\t\t\treturn this.events\n\t\t},\n\t\tgetIsClick(): boolean {\n\t\t\treturn this.isClick\n\t\t}\n\t},\n\tactions: {\n\t\tsetFilesListViewType(type: ViewType) {\n\t\t\tthis.viewType = type\n\t\t\tuseLocalStorage.set(FILE_LIST_VIEW_TYPE__KEY, type)\n\t\t},\n\t\tsetFolderBreadcrumb(folder: FileItem) {\n\t\t\tif (!folder.pid) {\n\t\t\t\tthis.folderBreadcrumb = [folder]\n\t\t\t}\n\t\t\tconst hasIn = this.folderBreadcrumb.some(v => v.name === folder.name)\n\t\t\tif (hasIn) {\n\t\t\t\tconst index = this.folderBreadcrumb.findIndex(v => v.name === folder.name)\n\t\t\t\tthis.folderBreadcrumb.splice(index + 1, 1)\n\t\t\t} else {\n\t\t\t\tthis.folderBreadcrumb.push(folder)\n\t\t\t}\n\t\t\tconsole.log('this.folderBreadcrumb:', this.folderBreadcrumb)\n\t\t\tuseLocalStorage.set(FOLDER_BREADCRUMB_KEY, this.folderBreadcrumb)\n\t\t},\n\t\tresetFolderBreadcrumb() {\n      // 对于一级菜单的id，统一按这个规则\n      let spaceId = teamStore.getActiveMenu.spaceId\n      let id = spaceId ? 'root:' + spaceId : ''\n\t\t\tthis.folderBreadcrumb = [{name: teamStore.getActiveMenu.text, id}]\n\t\t\tuseLocalStorage.set(FOLDER_BREADCRUMB_KEY, this.folderBreadcrumb)\n\t\t},\n\t\tsetStartItem(startItem: Recordable) {\n\t\t\tthis.startItem = startItem\n\t\t},\n\t\tsetEnterId(enterId: string) {\n\t\t\tthis.enterId = enterId\n\t\t},\n\t\tsetPointOffset(pointOffset) {\n\t\t\tthis.pointOffset = pointOffset\n\t\t},\n\t\tsetEnterType(enterType: string) {\n\t\t\tthis.enterType = enterType\n\t\t},\n\t\tsetEvents(events) {\n\t\t\tthis.events = events\n\t\t},\n\t\tsetIsClick(isClick) {\n\t\t\tthis.isClick = isClick\n\t\t}\n\t}\n})\n"],"names":["teamStore","useTeamStore","useFilesStore","defineStore","useLocalStorage","FILE_LIST_VIEW_TYPE__KEY","FOLDER_BREADCRUMB_KEY","type","folder","v","index","spaceId","id","startItem","enterId","pointOffset","enterType","events","isClick"],"mappings":"wEASA,MAAMA,EAAYC,EAAa,EAclBC,EAAgBC,EAAY,CACxC,GAAI,cACJ,MAAO,KAAmB,CACzB,SAAUC,EAAgB,IAAIC,CAAwB,GAAK,OAC3D,iBAAkBD,EAAgB,IAAIE,CAAqB,GAAK,CAAC,EACjE,OAAQ,CACP,QAAS,GACT,OAAQ,EACT,EACA,UAAW,CAAC,EACZ,QAAS,GACT,YAAa,CACZ,EAAG,KACH,EAAG,IACJ,EACA,UAAW,OACX,QAAS,EAAA,GAEV,QAAS,CACR,qBAAgC,CAC/B,OAAO,KAAK,QACb,EACA,qBAA2C,CAC1C,OAAO,KAAK,gBACb,EACA,cAA2B,CAC1B,OAAO,KAAK,SACb,EACA,YAAqB,CACpB,OAAO,KAAK,OACb,EACA,gBAA6B,CAC5B,OAAO,KAAK,WACb,EACA,cAAuB,CACtB,OAAO,KAAK,SACb,EACA,WAAwB,CACvB,OAAO,KAAK,MACb,EACA,YAAsB,CACrB,OAAO,KAAK,OACb,CACD,EACA,QAAS,CACR,qBAAqBC,EAAgB,CACpC,KAAK,SAAWA,EACAH,EAAA,IAAIC,EAA0BE,CAAI,CACnD,EACA,oBAAoBC,EAAkB,CAKrC,GAJKA,EAAO,MACN,KAAA,iBAAmB,CAACA,CAAM,GAElB,KAAK,iBAAiB,QAAUC,EAAE,OAASD,EAAO,IAAI,EACzD,CACJ,MAAAE,EAAQ,KAAK,iBAAiB,aAAeD,EAAE,OAASD,EAAO,IAAI,EACzE,KAAK,iBAAiB,OAAOE,EAAQ,EAAG,CAAC,CAAA,MAEpC,KAAA,iBAAiB,KAAKF,CAAM,EAE1B,QAAA,IAAI,yBAA0B,KAAK,gBAAgB,EAC3CJ,EAAA,IAAIE,EAAuB,KAAK,gBAAgB,CACjE,EACA,uBAAwB,CAEhB,IAAAK,EAAUX,EAAU,cAAc,QAClCY,EAAKD,EAAU,QAAUA,EAAU,GACrC,KAAA,iBAAmB,CAAC,CAAC,KAAMX,EAAU,cAAc,KAAM,GAAAY,EAAG,EACjDR,EAAA,IAAIE,EAAuB,KAAK,gBAAgB,CACjE,EACA,aAAaO,EAAuB,CACnC,KAAK,UAAYA,CAClB,EACA,WAAWC,EAAiB,CAC3B,KAAK,QAAUA,CAChB,EACA,eAAeC,EAAa,CAC3B,KAAK,YAAcA,CACpB,EACA,aAAaC,EAAmB,CAC/B,KAAK,UAAYA,CAClB,EACA,UAAUC,EAAQ,CACjB,KAAK,OAASA,CACf,EACA,WAAWC,EAAS,CACnB,KAAK,QAAUA,CAChB,CACD,CACD,CAAC"}
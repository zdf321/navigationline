var Xe=Object.defineProperty;var de=Object.getOwnPropertySymbols;var Be=Object.prototype.hasOwnProperty,Ce=Object.prototype.propertyIsEnumerable;var we=(n,i,s)=>i in n?Xe(n,i,{enumerable:!0,configurable:!0,writable:!0,value:s}):n[i]=s,ke=(n,i)=>{for(var s in i||(i={}))Be.call(i,s)&&we(n,s,i[s]);if(de)for(var s of de(i))Ce.call(i,s)&&we(n,s,i[s]);return n};var Ie=(n,i)=>{var s={};for(var a in n)Be.call(n,a)&&i.indexOf(a)<0&&(s[a]=n[a]);if(n!=null&&de)for(var a of de(n))i.indexOf(a)<0&&Ce.call(n,a)&&(s[a]=n[a]);return s};var T=(n,i,s)=>new Promise((a,f)=>{var F=c=>{try{A(s.next(c))}catch(x){f(x)}},y=c=>{try{A(s.throw(c))}catch(x){f(x)}},A=c=>c.done?a(c.value):Promise.resolve(c.value).then(F,y);A((s=s.apply(n,i)).next())});import{u as Ze,_ as eu,D as xe}from"./useFiles.8ce8d7f0.js";import{u as uu,a as tu,t as lu,S as Te}from"./SingleMenu.daaff245.js";import{b as Ne,_ as K,a as De}from"./useEmitter.ba8e6a16.js";import{e as Ve,c as au,d as nu,a as ou,F as su,W as iu}from"./useMouseEvent.70f0ed88.js";import{m as du,n as ru,o as mu,p as pu,q as cu,r as fu,s as Se,t as vu,u as Fu,g as _u,v as Ue,w as bu,x as Eu,y as gu,z as yu,A as Au}from"./team.4e4308de.js";import{d as P,o as E,l as N,k as l,c as oe,r as C,a as ee,D as hu,g as r,h as V,w as t,i as e,j as B,E as j,e as wu,t as R,m as z,_ as ue,aq as ve,f as o,B as Le,P as Bu,F as ne,y as Fe,z as _e,n as Me,ar as J,R as Cu,u as ku,aL as $e,q as Re}from"./index.96d3aca4.js";import{g as X}from"./form.8bf32b71.js";import{O as Iu,T as xu}from"./OnlyFileContent.e8872604.js";import{M as Tu,d as Du}from"./menu.11f2eb8e.js";import{M as ae,b as Mu}from"./menuValueEnum.ea7dad60.js";import{u as $u}from"./usePage.d2f65d4f.js";import{_ as Z}from"./plugin-vue_export-helper.41ffa612.js";import{s as Ru}from"./search.33718158.js";import{a as Nu}from"./avatar.9103c0b9.js";import{s as Vu}from"./select.a2f29164.js";import"./files.a226cb89.js";import"./useCloneMove.9f8ce0cb.js";import"./index.b17e1e50.js";const Su=P({name:"Avatar"}),Uu={viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg"},Lu=l("path",{fill:"currentColor",d:"M628.736 528.896A416 416 0 0 1 928 928H96a415.872 415.872 0 0 1 299.264-399.104L512 704l116.736-175.104zM720 304a208 208 0 1 1-416 0 208 208 0 0 1 416 0z"},null,-1),zu=[Lu];function Ou(n,i,s,a,f,F){return E(),N("svg",Uu,zu)}var Wu=Z(Su,[["render",Ou]]);const Pu=P({name:"EditPen"}),ju={viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg"},Gu=l("path",{d:"m199.04 672.64 193.984 112 224-387.968-193.92-112-224 388.032zm-23.872 60.16 32.896 148.288 144.896-45.696L175.168 732.8zM455.04 229.248l193.92 112 56.704-98.112-193.984-112-56.64 98.112zM104.32 708.8l384-665.024 304.768 175.936L409.152 884.8h.064l-248.448 78.336L104.32 708.8zm384 254.272v-64h448v64h-448z",fill:"currentColor"},null,-1),qu=[Gu];function Hu(n,i,s,a,f,F){return E(),N("svg",ju,qu)}var Yu=Z(Pu,[["render",Hu]]);const Qu=P({name:"InfoFilled"}),Ju={viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg"},Ku=l("path",{fill:"currentColor",d:"M512 64a448 448 0 1 1 0 896.064A448 448 0 0 1 512 64zm67.2 275.072c33.28 0 60.288-23.104 60.288-57.344s-27.072-57.344-60.288-57.344c-33.28 0-60.16 23.104-60.16 57.344s26.88 57.344 60.16 57.344zM590.912 699.2c0-6.848 2.368-24.64 1.024-34.752l-52.608 60.544c-10.88 11.456-24.512 19.392-30.912 17.28a12.992 12.992 0 0 1-8.256-14.72l87.68-276.992c7.168-35.136-12.544-67.2-54.336-71.296-44.096 0-108.992 44.736-148.48 101.504 0 6.784-1.28 23.68.064 33.792l52.544-60.608c10.88-11.328 23.552-19.328 29.952-17.152a12.8 12.8 0 0 1 7.808 16.128L388.48 728.576c-10.048 32.256 8.96 63.872 55.04 71.04 67.84 0 107.904-43.648 147.456-100.416z"},null,-1),Xu=[Ku];function Zu(n,i,s,a,f,F){return E(),N("svg",Ju,Xu)}var ze=Z(Qu,[["render",Zu]]);const et=P({name:"MoreFilled"}),ut={viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg"},tt=l("path",{fill:"currentColor",d:"M176 416a112 112 0 1 1 0 224 112 112 0 0 1 0-224zm336 0a112 112 0 1 1 0 224 112 112 0 0 1 0-224zm336 0a112 112 0 1 1 0 224 112 112 0 0 1 0-224z"},null,-1),lt=[tt];function at(n,i,s,a,f,F){return E(),N("svg",ut,lt)}var nt=Z(et,[["render",at]]);const ot=P({name:"QuestionFilled"}),st={viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg"},it=l("path",{fill:"currentColor",d:"M512 64a448 448 0 1 1 0 896 448 448 0 0 1 0-896zm23.744 191.488c-52.096 0-92.928 14.784-123.2 44.352-30.976 29.568-45.76 70.4-45.76 122.496h80.256c0-29.568 5.632-52.8 17.6-68.992 13.376-19.712 35.2-28.864 66.176-28.864 23.936 0 42.944 6.336 56.32 19.712 12.672 13.376 19.712 31.68 19.712 54.912 0 17.6-6.336 34.496-19.008 49.984l-8.448 9.856c-45.76 40.832-73.216 70.4-82.368 89.408-9.856 19.008-14.08 42.24-14.08 68.992v9.856h80.96v-9.856c0-16.896 3.52-31.68 10.56-45.76 6.336-12.672 15.488-24.64 28.16-35.2 33.792-29.568 54.208-48.576 60.544-55.616 16.896-22.528 26.048-51.392 26.048-86.592 0-42.944-14.08-76.736-42.24-101.376-28.16-25.344-65.472-37.312-111.232-37.312zm-12.672 406.208a54.272 54.272 0 0 0-38.72 14.784 49.408 49.408 0 0 0-15.488 38.016c0 15.488 4.928 28.16 15.488 38.016A54.848 54.848 0 0 0 523.072 768c15.488 0 28.16-4.928 38.72-14.784a51.52 51.52 0 0 0 16.192-38.72 51.968 51.968 0 0 0-15.488-38.016 55.936 55.936 0 0 0-39.424-14.784z"},null,-1),dt=[it];function rt(n,i,s,a,f,F){return E(),N("svg",st,dt)}var re=Z(ot,[["render",rt]]);const mt=P({name:"User"}),pt={viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg"},ct=l("path",{fill:"currentColor",d:"M512 512a192 192 0 1 0 0-384 192 192 0 0 0 0 384zm0 64a256 256 0 1 1 0-512 256 256 0 0 1 0 512zm320 320v-96a96 96 0 0 0-96-96H288a96 96 0 0 0-96 96v96a32 32 0 1 1-64 0v-96a160 160 0 0 1 160-160h448a160 160 0 0 1 160 160v96a32 32 0 1 1-64 0z"},null,-1),ft=[ct];function vt(n,i,s,a,f,F){return E(),N("svg",pt,ft)}var Ft=Z(mt,[["render",vt]]);const _t=P({name:"WarningFilled"}),bt={viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg"},Et=l("path",{fill:"currentColor",d:"M512 64a448 448 0 1 1 0 896 448 448 0 0 1 0-896zm0 192a58.432 58.432 0 0 0-58.24 63.744l23.36 256.384a35.072 35.072 0 0 0 69.76 0l23.296-256.384A58.432 58.432 0 0 0 512 256zm0 512a51.2 51.2 0 1 0 0-102.4 51.2 51.2 0 0 0 0 102.4z"},null,-1),gt=[Et];function yt(n,i,s,a,f,F){return E(),N("svg",bt,gt)}var At=Z(_t,[["render",yt]]);function ht(){const n=oe({visible:!1,title:"\u521B\u5EFA\u7A7A\u95F4",type:"add"});function i(a,f="add"){n.type=f,n.title=a,n.visible=!0}function s(a){n.visible=!1}return{teamSpaceData:n,handleTeamSpaceVisible:i,handleTeamSpaceRes:s}}const wt={class:"flex justify-end mt-10"},Bt=P({__name:"TeamSpaceForm",props:{defaultForm:{}},emits:["formResponse"],setup(n,{emit:i}){const s=n,a=C(),f=ee(),F=C({teamId:f.getActiveTeamId,name:"",desc:""});hu(()=>{if(s.defaultForm){const h=Ie(s.defaultForm,[]);F.value=Object.assign({},ke({},h))}else F.value={teamId:f.getActiveTeamId,name:"",desc:""}});const y=i;function A(){a.value.validate(h=>{h&&(x(),y("formResponse",!0))})}function c(){y("formResponse",!1)}function x(){return T(this,null,function*(){const h=X(F.value);yield du(h),j.success("\u6DFB\u52A0\u6210\u529F"),Ne("handleUpdateTeamSpaceList")})}return(h,v)=>{const g=r("el-input"),_=r("ElFormItem"),d=r("el-button"),w=r("ElForm");return E(),V(w,{ref_key:"ruleFormRef",ref:a,model:F.value,"label-position":"right","label-width":"100px",size:"large",class:"login-basic-form"},{default:t(()=>[e(_,{"label-width":"0px",prop:"name",rules:[{required:!0,message:"\u7A7A\u95F4\u540D\u79F0\u4E0D\u80FD\u4E3A\u7A7A"}]},{default:t(()=>[e(g,{modelValue:F.value.name,"onUpdate:modelValue":v[0]||(v[0]=m=>F.value.name=m),modelModifiers:{trim:!0},placeholder:"\u8BF7\u8F93\u5165\u7A7A\u95F4\u540D\u79F0",clearable:"",maxlength:"20","show-word-limit":""},null,8,["modelValue"])]),_:1}),e(_,{"label-width":"0px",prop:"desc"},{default:t(()=>[e(g,{modelValue:F.value.desc,"onUpdate:modelValue":v[1]||(v[1]=m=>F.value.desc=m),modelModifiers:{trim:!0},placeholder:"\u8BF7\u8F93\u5165\u7A7A\u95F4\u63CF\u8FF0",type:"textarea",clearable:"",rows:"4",resize:"none",maxlength:"128","show-word-limit":""},null,8,["modelValue"])]),_:1}),l("div",wt,[e(d,{type:"primary",onClick:A},{default:t(()=>v[2]||(v[2]=[B("\u786E\u5B9A")])),_:1}),e(d,{onClick:c},{default:t(()=>v[3]||(v[3]=[B("\u53D6\u6D88")])),_:1})])]),_:1},8,["model"])}}});const Ct={style:{display:"flex",width:"100%"}},kt={style:{display:"flex",width:"100%"}},It={key:0,style:{color:"#F56C6C","font-size":"12px"}},xt=P({__name:"MemberForm",setup(n){const i=ee(),s=C(),a=C({teamId:i.getActiveTeamId,isOpen:!1,validDays:-1}),{toClipboard:f}=Ve(),F=C("inviteWithLink"),y=C(""),A=C(!1),c=wu(()=>a.value.isOpen?"\u5173\u95ED\u9080\u8BF7\u94FE\u63A5\uFF0C\u9080\u8BF7\u94FE\u63A5\u5C06\u5931\u6548":"\u5F00\u542F\u9080\u8BF7\u94FE\u63A5\uFF0C\u6210\u5458\u8BBF\u95EE\u94FE\u63A5\u53EF\u7533\u8BF7\u52A0\u5165\u56E2\u961F");function x(){ve.confirm("\u91CD\u7F6E\u540E\uFF0C\u4E4B\u524D\u7684\u9080\u8BF7\u94FE\u63A5\u5C06\u5931\u6548\uFF01","\u6CE8\u610F",{confirmButtonText:"\u786E\u8BA4",cancelButtonText:"\u53D6\u6D88",type:"warning"}).then(()=>{v()}).catch(()=>{})}function h(){return T(this,null,function*(){yield f(y.value),j.success("\u590D\u5236\u6210\u529F")})}function v(){return T(this,null,function*(){const _=X(a.value),{data:d}=yield ru(_);y.value=window.location.origin+"/team/invitation/index?inviteId="+d,A.value=!1,j.success("\u8BBE\u7F6E\u6210\u529F")})}function g(){return T(this,null,function*(){const{data:_}=yield mu(i.getActiveTeamId);a.value.isOpen=_.inviteLinkOpen==1,a.value.validDays=_.inviteLinkDays||-1,A.value=!_.inviteLinkValid,y.value=window.location.origin+"/team/invitation/index?inviteId="+_.inviteLink})}return g(),(_,d)=>{const w=r("el-switch"),m=r("ElFormItem"),I=r("el-option"),H=r("el-select"),W=r("el-input"),S=r("el-button"),D=r("ElForm"),k=r("el-tab-pane"),M=r("el-tabs");return E(),V(M,{modelValue:F.value,"onUpdate:modelValue":d[3]||(d[3]=L=>F.value=L)},{default:t(()=>[e(k,{label:"\u94FE\u63A5\u9080\u8BF7",name:"inviteWithLink"},{default:t(()=>[e(D,{ref_key:"ruleFormRef",ref:s,model:a.value,"label-position":"right","label-width":"100px",size:"large",class:"login-basic-form"},{default:t(()=>[e(m,{"label-width":"0"},{default:t(()=>[e(w,{size:"small",modelValue:a.value.isOpen,"onUpdate:modelValue":d[0]||(d[0]=L=>a.value.isOpen=L),onChange:v},null,8,["modelValue"]),B("\xA0"+R(c.value),1)]),_:1}),a.value.isOpen?(E(),V(m,{key:0,"label-width":"0"},{default:t(()=>[l("div",Ct,[d[4]||(d[4]=l("div",null,"\u94FE\u63A5\u6709\u6548\u671F\uFF1A",-1)),e(H,{modelValue:a.value.validDays,"onUpdate:modelValue":d[1]||(d[1]=L=>a.value.validDays=L),onChange:v},{default:t(()=>[e(I,{label:"\u6C38\u4E45\u6709\u6548",value:-1}),e(I,{label:"1\u5929",value:1}),e(I,{label:"3\u5929",value:3}),e(I,{label:"7\u5929",value:7}),e(I,{label:"30\u5929",value:30})]),_:1},8,["modelValue"])])]),_:1})):z("",!0),a.value.isOpen?(E(),V(m,{key:1,"label-width":"0"},{default:t(()=>[l("div",kt,[e(W,{disabled:"",modelValue:y.value,"onUpdate:modelValue":d[2]||(d[2]=L=>y.value=L),style:{"margin-right":"12px"}},null,8,["modelValue"]),e(S,{type:"primary",plain:"",onClick:x},{default:t(()=>d[5]||(d[5]=[B("\u91CD\u7F6E")])),_:1}),e(S,{type:"primary",onClick:h},{default:t(()=>d[6]||(d[6]=[B("\u590D\u5236\u94FE\u63A5")])),_:1})]),A.value?(E(),N("span",It,"\u94FE\u63A5\u5DF2\u5931\u6548\uFF0C\u8BF7\u91CD\u7F6E")):z("",!0)]),_:1})):z("",!0)]),_:1},8,["model"])]),_:1}),e(k,{label:"\u624B\u673A\u53F7/\u90AE\u7BB1\u6DFB\u52A0",name:"inviteWithPhoneEmail"},{default:t(()=>d[7]||(d[7]=[B("\u529F\u80FD\u5F00\u53D1\u4E2D\uFF0C\u8BF7\u5148\u901A\u8FC7\u94FE\u63A5\u9080\u8BF7")])),_:1})]),_:1},8,["modelValue"])}}});var Tt=ue(xt,[["__scopeId","data-v-1a9617a0"]]);function Dt(){const n=oe({visible:!1,title:"\u56E2\u961F\u4FE1\u606F",type:"add"});function i(a="\u56E2\u961F\u4FE1\u606F",f="add"){n.type=f,n.title=a,n.visible=!0}function s(a){a&&console.log("\u64CD\u4F5C\u6210\u529F\u540E..."),n.visible=!1}return{teamInfoData:n,handleTeamInfoVisible:i,handleTeamInfoRes:s}}function Mt(){const n=oe({visible:!1,title:"\u8BBE\u7F6E\u6210\u5458\u6743\u9650",type:"add",uid:""});function i(a,f="\u8BBE\u7F6E\u6210\u5458\u6743\u9650",F="add"){console.log("uid...",a),n.type=F,n.title=f,n.visible=!0,n.uid=a}function s(a){a&&console.log("\u64CD\u4F5C\u6210\u529F\u540E..."),n.visible=!1}return{teamMemberInfoData:n,handleTeamMemberInfoVisible:i,handleTeamMemberInfoRes:s}}const $t={style:{display:"flex","align-items":"center"}},Rt=["onClick"],Nt={class:"auth-bth-first"},Vt={class:"auth-bth-second"},St={class:"flex justify-end mt-10"},Ut=P({__name:"TeamMemberInfoForm",props:{uid:{},isSelf:{type:Boolean},loginUserTeamRole:{}},emits:["formResponse"],setup(n,{emit:i}){const s=n,a=ee(),{spaceRoleInfos:f}=uu(),F=i,y=C({teamId:a.getActiveTeamId,role:"OWNER",teamNickname:"",uid:"",spaceRoles:[]}),A=_=>_==="OWNER";function c(_,d){_.spaceRole=d}function x(){F("formResponse",!1)}function h(){return T(this,null,function*(){const{data:_}=yield pu(a.getActiveTeamId,s.uid);y.value.role=_.role,y.value.teamNickname=_.teamNickname,y.value.uid=_.uid,y.value.spaceRoles=_.spaceRoles})}h();function v(){return T(this,null,function*(){const{data:_}=yield cu(y.value);_&&(j.success("\u4FDD\u5B58\u6210\u529F"),F("formResponse",!0))})}function g(){return T(this,null,function*(){let _={teamId:a.getActiveTeamId,uid:y.value.uid};const d=X(_),{data:w}=yield fu(d);w&&(j.success("\u79FB\u9664\u6210\u529F"),F("formResponse",!0))})}return(_,d)=>{const w=r("el-option"),m=r("el-select"),I=r("ElFormItem"),H=r("el-input"),W=r("el-table-column"),S=r("el-button"),D=r("el-tooltip"),k=r("el-icon"),M=r("el-popover"),L=r("el-table"),Q=r("ElForm");return E(),V(Q,{ref:"ruleFormRef",model:y.value,"label-position":"right","label-width":"100px",size:"large",class:"login-basic-form"},{default:t(()=>[e(I,{prop:"role",label:"\u56E2\u961F\u6743\u9650",rules:[{required:!0,message:"\u8BF7\u9009\u62E9\u56E2\u961F\u6743\u9650"}]},{default:t(()=>[e(m,{modelValue:y.value.role,"onUpdate:modelValue":d[0]||(d[0]=U=>y.value.role=U),placeholder:"\u8BF7\u9009\u62E9\u56E2\u961F\u6743\u9650",style:{width:"100%"},disabled:s.isSelf},{default:t(()=>[e(w,{label:"\u6240\u6709\u8005",value:"OWNER",disabled:""}),e(w,{label:"\u56E2\u961F\u7BA1\u7406\u5458",value:"ADMIN",disabled:s.loginUserTeamRole==="ADMIN"},null,8,["disabled"]),e(w,{label:"\u666E\u901A\u6210\u5458",value:"NORMAL"})]),_:1},8,["modelValue","disabled"])]),_:1}),e(I,{prop:"teamNickname",label:"\u56E2\u961F\u5185\u6635\u79F0"},{default:t(()=>[e(H,{modelValue:y.value.teamNickname,"onUpdate:modelValue":d[1]||(d[1]=U=>y.value.teamNickname=U),modelModifiers:{trim:!0},placeholder:"\u8BF7\u8F93\u5165\u56E2\u961F\u5185\u6635\u79F0\uFF0C\u4FBF\u4E8E\u534F\u4F5C",clearable:"",maxlength:"20","show-word-limit":""},null,8,["modelValue"])]),_:1}),d[7]||(d[7]=l("div",{style:{"margin-bottom":"5px"}},"\u7A7A\u95F4\u6743\u9650",-1)),e(L,{data:y.value.spaceRoles,height:"410","empty-text":"\u6682\u65E0\u6570\u636E",border:"",stripe:"",disabled:"",size:"small"},{default:t(()=>[e(W,{prop:"spaceName",label:"\u7A7A\u95F4"}),e(W,{prop:"spaceRole"},{header:t(()=>[l("div",$t,[d[2]||(d[2]=l("span",null,"\u6743\u9650",-1)),d[3]||(d[3]=B("\xA0 ")),e(D,{class:"box-item",effect:"dark",content:"\u56E2\u961F\u6240\u6709\u8005\u53CA\u56E2\u961F\u7BA1\u7406\u5458\u62E5\u6709\u6240\u6709\u7A7A\u95F4\u7684\u7BA1\u7406\u6743\u9650",placement:"right"},{default:t(()=>[e(S,{icon:o(re),link:""},null,8,["icon"])]),_:1})])]),default:t(U=>[e(M,{placement:"bottom",width:180,trigger:"click","popper-class":"space-auth-popper",disabled:A(U.row.spaceRole)||["OWNER","ADMIN"].includes(y.value.role)},{reference:t(()=>[e(S,{link:""},{default:t(()=>[B(R(U.row.spaceRole==="OWNER"?"\u62E5\u6709\u8005":U.row.spaceRole==="EDITOR"?"\u53EF\u7F16\u8F91":U.row.spaceRole==="READER"?"\u53EF\u67E5\u770B":"\u7981\u6B62\u8BBF\u95EE")+" ",1),e(k,{class:"el-icon--right"},{default:t(()=>[A(U.row.spaceRole)?z("",!0):(E(),V(o(tu),{key:0}))]),_:2},1024)]),_:2},1024)]),default:t(()=>[(E(!0),N(ne,null,Le(o(f),G=>(E(),N("div",{class:Bu(["mb-2","auth-btn",{"auth-btn-active":U.row.spaceRole==G.role}]),key:G.name,onClick:q=>c(U.row,G.role)},[l("div",Nt,R(G.name),1),l("div",Vt,R(G.desc),1)],10,Rt))),128))]),_:2},1032,["disabled"])]),_:1})]),_:1},8,["data"]),l("div",St,[y.value.role!=="OWNER"?(E(),V(S,{key:0,type:"danger",onClick:g},{default:t(()=>d[4]||(d[4]=[B("\u79FB\u9664\u6210\u5458")])),_:1})):z("",!0),e(S,{type:"primary",onClick:v},{default:t(()=>d[5]||(d[5]=[B("\u4FDD\u5B58")])),_:1}),e(S,{onClick:x},{default:t(()=>d[6]||(d[6]=[B("\u53D6\u6D88")])),_:1})])]),_:1},8,["model"])}}});var Lt=ue(Ut,[["__scopeId","data-v-49148a7c"]]);const zt={style:{display:"flex","align-items":"center"}},Ot={style:{width:"28px",height:"28px","background-color":"#3B82F6",display:"flex","justify-content":"center","align-items":"center","border-radius":"4px"}},Wt={style:{color:"#ffffff","font-size":"18px"}},Pt={style:{color:"#101010","font-size":"15px"}},jt={class:"team-info"},Gt={key:0},qt={class:"mb-3",style:{display:"flex","align-items":"center"}},Ht={style:{border:"1px solid #dcdfe6","border-radius":"6px",padding:"20px"}},Yt={class:"mb-3 mt-3",style:{color:"#faad14",display:"flex","align-items":"center"}},Qt={style:{border:"1px solid #f3d19e","border-radius":"6px",padding:"20px"}},Jt=P({__name:"TeamInfoForm",setup(n){const i=ee(),{teamMemberInfoData:s,handleTeamMemberInfoVisible:a,handleTeamMemberInfoRes:f}=Mt(),{toClipboard:F}=Ve(),y=C("teamInfo"),A=C({}),c=C({publishUrl1:"",publishUrl2:""}),x=C(!1),h=C([]),v=C(1),g=C(10),_=C(0),d=C(""),w=C({teamId:i.getActiveTeamId,teamName:"",teamNickname:"",ownerUid:""}),m=C({teamId:i.getActiveTeamId,published:!1,showAd:!1,checkAuth:!1,needLogin:!1}),I=C({uid:"",teamRole:""}),H=C([]),W=C(!0),S=C(!0),D=(b,u)=>b.role==="OWNER"?"\u6240\u6709\u8005":b.role==="ADMIN"?"\u7BA1\u7406\u5458":"\u666E\u901A\u6210\u5458",k=b=>{te()},M=b=>{te()};function L(b){f(b),b&&te()}function Q(){W.value||me(),W.value=!W.value}function U(){S.value||me(),S.value=!S.value}function G(b){ve({title:"\u79FB\u4EA4\u56E2\u961F\uFF1F",message:"\u79FB\u4EA4\u540E\uFF0C\u60A8\u5C06\u4E0D\u518D\u662F\u56E2\u961F\u6240\u6709\u8005\uFF0C\u6743\u9650\u81EA\u52A8\u53D8\u4E3A\u666E\u901A\u6210\u5458\uFF01",showCancelButton:!0,cancelButtonText:"\u53D6\u6D88",confirmButtonText:"\u786E\u8BA4",draggable:!0,beforeClose:(u,O,$)=>{u==="confirm"?(O.confirmButtonLoading=!0,O.confirmButtonText="Loading...",setTimeout(()=>{$(),setTimeout(()=>{O.confirmButtonLoading=!1},300)},300)):(w.value.ownerUid="",$())}}).then(()=>T(this,null,function*(){me("\u79FB\u4EA4\u6210\u529F"),setTimeout(()=>{Me.go(0)},500)}))}function q(){m.value.published||(m.value.showAd=!1,m.value.checkAuth=!1,m.value.needLogin=!1),ye()}function be(){(m.value.showAd||m.value.checkAuth||m.value.needLogin)&&(m.value.published=!0),ye()}function Ee(b){return T(this,null,function*(){yield F(b),j.success("\u590D\u5236\u6210\u529F")})}function ge(b){window.open(b,"_blank")}function Oe(){return T(this,null,function*(){const{data:b}=yield Se({teamId:i.getActiveTeamId});A.value=b,w.value.teamName=b.name,w.value.teamNickname=b.teamNickname})}function te(){return T(this,null,function*(){try{x.value=!0;const{rows:b,total:u}=yield vu(v.value,g.value,i.getActiveTeamId,d.value);h.value=b,_.value=u}finally{x.value=!1}})}function We(){return T(this,null,function*(){const{data:b}=yield Fu(i.getActiveTeamId,null);H.value=b})}function Pe(){return T(this,null,function*(){const{data:b}=yield _u(i.getActiveTeamId);I.value.teamRole=b.teamRole,I.value.uid=b.uid})}Oe(),te(),We(),Pe();function me(b="\u4FDD\u5B58\u6210\u529F"){return T(this,null,function*(){const u=X(w.value),{data:O}=yield Ue(u);O&&(A.value.name=w.value.teamName,j.success(b))})}function je(b){return T(this,null,function*(){ve({title:"\u89E3\u6563\u56E2\u961F\uFF1F",message:J("p",null,[J("p",null,[J("span",null,"\u89E3\u6563 "),J("i",null,[J("b",null,`${b}`)]),J("span",null," \u56E2\u961F\u540E\uFF0C\u8BE5\u56E2\u961F\u4E0B\u7684\u6240\u6709\u6570\u636E\u90FD\u5C06\u88AB\u540C\u6B65\u5220\u9664\uFF0C\u4E14\u4E0D\u53EF\u6062\u590D\uFF01")])]),showCancelButton:!0,cancelButtonText:"\u53D6\u6D88",confirmButtonText:"\u786E\u8BA4",draggable:!0,beforeClose:(u,O,$)=>{u==="confirm"?(O.confirmButtonLoading=!0,O.confirmButtonText="Loading...",setTimeout(()=>{$(),setTimeout(()=>{O.confirmButtonLoading=!1},300)},300)):$()}}).then(()=>T(this,null,function*(){let u={teamId:i.getActiveTeamId};const O=X(u),{data:$}=yield bu(O);$&&(j.success("\u5DF2\u89E3\u6563"),Ne("handleUpdateTeamList"),setTimeout(()=>{Me.push(Cu.SELF_FILE)},500))}))})}function ye(){return T(this,null,function*(){const b=X(m.value),{data:u,status:O}=yield Eu(b);O==1&&(j.success("\u8BBE\u7F6E\u6210\u529F"),m.value.published?(c.value.publishUrl1=u.domain,c.value.publishUrl2=window.location.origin+"/p/"+u.id):(c.value.publishUrl1="",c.value.publishUrl2=""))})}function Ge(){return T(this,null,function*(){const{data:b}=yield gu(i.getActiveTeamId);b&&(m.value.published=b.published,m.value.showAd=b.showAd,m.value.checkAuth=b.checkAuth,m.value.needLogin=b.needLogin,m.value.published?(c.value.publishUrl1=b.domain,c.value.publishUrl2=window.location.origin+"/p/"+b.id):(c.value.publishUrl1="",c.value.publishUrl2=""))})}return Ge(),(b,u)=>{const O=r("el-tag"),$=r("el-button"),se=r("el-tab-pane"),ie=r("el-input"),le=r("el-table-column"),qe=r("el-table"),He=r("el-pagination"),pe=r("el-tooltip"),ce=r("el-switch"),Y=r("ElFormItem"),fe=r("ElForm"),Ae=r("el-icon"),Ye=r("el-option"),Qe=r("el-select"),Je=r("el-tabs"),Ke=Fe("loading");return E(),N(ne,null,[e(Je,{modelValue:y.value,"onUpdate:modelValue":u[20]||(u[20]=p=>y.value=p)},{default:t(()=>[e(se,{label:"\u56E2\u961F\u4FE1\u606F",name:"teamInfo"},{default:t(()=>{var p;return[l("div",zt,[l("div",Ot,[l("span",Wt,R((p=A.value.name)==null?void 0:p.substring(0,1)),1)]),l("span",Pt,"\xA0"+R(A.value.name)+"\xA0",1)]),l("table",jt,[l("tr",null,[u[22]||(u[22]=l("td",null,"\u5F53\u524D\u7248\u672C",-1)),l("td",null,[e(O,{type:"primary"},{default:t(()=>[B(R(A.value.vipName),1)]),_:1})])]),l("tr",null,[u[23]||(u[23]=l("td",null,"\u521B\u5EFA\u8005",-1)),l("td",null,R(A.value.creator),1)]),l("tr",null,[u[24]||(u[24]=l("td",null,"\u521B\u5EFA\u65F6\u95F4",-1)),l("td",null,R(A.value.createTime),1)]),u[31]||(u[31]=l("tr",null,[l("td",null,"\u5230\u671F\u65F6\u95F4"),l("td",null,"+\u221E")],-1)),l("tr",null,[u[25]||(u[25]=l("td",null,"\u6210\u5458\u89C4\u6A21",-1)),l("td",null,R(A.value.scaleName),1)]),l("tr",null,[u[26]||(u[26]=l("td",null,"\u4E1A\u52A1\u7C7B\u578B",-1)),l("td",null,R(A.value.businessType),1)]),l("tr",null,[u[27]||(u[27]=l("td",null,"\u6210\u5458\u4EBA\u6570",-1)),l("td",null,R(A.value.teamMemberCount),1)]),c.value.publishUrl2?(E(),N("tr",Gt,[u[30]||(u[30]=l("td",null,"\u8BBF\u95EE\u5730\u5740",-1)),l("td",null,[e($,{text:""},{default:t(()=>[B(R(c.value.publishUrl2),1)]),_:1}),c.value.publishUrl2?(E(),V($,{key:0,type:"primary",link:"",onClick:u[0]||(u[0]=he=>Ee(c.value.publishUrl2))},{default:t(()=>u[28]||(u[28]=[B("\u590D\u5236")])),_:1})):z("",!0),c.value.publishUrl2?(E(),V($,{key:1,type:"primary",link:"",onClick:u[1]||(u[1]=he=>ge(c.value.publishUrl2))},{default:t(()=>u[29]||(u[29]=[B("\u6253\u5F00")])),_:1})):z("",!0)])])):z("",!0)])]}),_:1}),["OWNER","ADMIN"].includes(I.value.teamRole)?(E(),V(se,{key:0,label:"\u6210\u5458/\u6743\u9650",name:"member"},{default:t(()=>[_e((E(),N("div",null,[e(ie,{modelValue:d.value,"onUpdate:modelValue":u[2]||(u[2]=p=>d.value=p),size:"large",placeholder:"\u641C\u7D22\u6210\u5458","prefix-icon":o(Ru),clearable:"",onInput:u[3]||(u[3]=p=>te())},null,8,["modelValue","prefix-icon"]),e(qe,{data:h.value,"empty-text":"\u65E0\u6570\u636E",height:"500",class:"auth-table"},{default:t(()=>[e(le,{prop:"nickname",label:"\u6210\u5458"}),e(le,{prop:"teamNickname",label:"\u56E2\u961F\u6635\u79F0"}),e(le,{prop:"joinTime",align:"center",label:"\u52A0\u5165\u65F6\u95F4"}),e(le,{prop:"role",label:"\u56E2\u961F\u6743\u9650",align:"center",formatter:D,width:"80px"}),e(le,{prop:"setting",label:"\u8BBE\u7F6E",align:"center",width:"60px"},{default:t(p=>[e($,{type:"primary",link:"",icon:o(lu),onClick:he=>o(a)(p.row.uid),disabled:I.value.teamRole==="ADMIN"&&["OWNER","ADMIN"].includes(p.row.role)&&p.row.uid!==I.value.uid},null,8,["icon","onClick","disabled"])]),_:1})]),_:1},8,["data"]),e(He,{"current-page":v.value,"onUpdate:currentPage":u[4]||(u[4]=p=>v.value=p),"page-size":g.value,"onUpdate:pageSize":u[5]||(u[5]=p=>g.value=p),background:"","page-sizes":[10,20,30,40,50],layout:"->, total, sizes, prev, pager, next",total:_.value,"pager-count":5,onSizeChange:k,onCurrentChange:M},null,8,["current-page","page-size","total"])])),[[Ke,x.value]])]),_:1})):z("",!0),["OWNER","ADMIN"].includes(I.value.teamRole)?(E(),V(se,{key:1,label:"\u53D1\u5E03\u914D\u7F6E",name:"publish"},{default:t(()=>[e(fe,{ref:"publishFormRef",model:m.value,"label-position":"right","label-width":"140px",class:"login-basic-form publish-form"},{default:t(()=>[e(Y,{prop:"published"},{label:t(()=>[u[32]||(u[32]=l("span",null,"\u662F\u5426\u53D1\u5E03",-1)),e(pe,{effect:"dark",content:"\u53D1\u5E03\u540E\uFF0C\u53EF\u751F\u6210\u72EC\u7ACB\u7684\u8BBF\u95EE\u5730\u5740\uFF0C\u56E2\u961F\u6216\u975E\u56E2\u961F\u6210\u5458\u90FD\u53EF\u4EE5\u8BBF\u95EE",placement:"right"},{default:t(()=>[e($,{icon:o(re),link:""},null,8,["icon"])]),_:1})]),default:t(()=>[e(ce,{modelValue:m.value.published,"onUpdate:modelValue":u[6]||(u[6]=p=>m.value.published=p),onChange:u[7]||(u[7]=p=>q())},null,8,["modelValue"])]),_:1}),e(Y,{prop:"needLogin"},{label:t(()=>[u[33]||(u[33]=l("span",null,"\u662F\u5426\u9700\u8981\u767B\u5F55",-1)),e(pe,{effect:"dark",content:"\u5F00\u542F\u540E\uFF0C\u53EA\u6709\u5148\u767B\u5F55\u624D\u80FD\u8BBF\u95EE\u53D1\u5E03\u540E\u7684\u5730\u5740",placement:"right"},{default:t(()=>[e($,{icon:o(re),link:""},null,8,["icon"])]),_:1})]),default:t(()=>[e(ce,{modelValue:m.value.needLogin,"onUpdate:modelValue":u[8]||(u[8]=p=>m.value.needLogin=p),onChange:u[9]||(u[9]=p=>be())},null,8,["modelValue"])]),_:1}),e(Y,{prop:"checkAuth"},{label:t(()=>[u[34]||(u[34]=l("span",null,"\u662F\u5426\u9700\u8981\u6743\u9650\u63A7\u5236",-1)),e(pe,{effect:"dark",content:"\u5F00\u542F\u540E\uFF0C\u53EA\u6709\u8BE5\u56E2\u961F\u5185\u7684\u6210\u5458\u624D\u80FD\u8BBF\u95EE",placement:"right"},{default:t(()=>[e($,{icon:o(re),link:""},null,8,["icon"])]),_:1})]),default:t(()=>[e(ce,{modelValue:m.value.checkAuth,"onUpdate:modelValue":u[10]||(u[10]=p=>m.value.checkAuth=p),onChange:u[11]||(u[11]=p=>be())},null,8,["modelValue"])]),_:1}),e(Y,{prop:"publishUrl2",label:"\u8BBF\u95EE\u5730\u5740"},{default:t(()=>[e($,{text:""},{default:t(()=>[B(R(c.value.publishUrl2),1)]),_:1}),c.value.publishUrl2?(E(),V($,{key:0,type:"primary",link:"",onClick:u[12]||(u[12]=p=>Ee(c.value.publishUrl2))},{default:t(()=>u[35]||(u[35]=[B("\u590D\u5236")])),_:1})):z("",!0),c.value.publishUrl2?(E(),V($,{key:1,type:"primary",link:"",onClick:u[13]||(u[13]=p=>ge(c.value.publishUrl2))},{default:t(()=>u[36]||(u[36]=[B("\u6253\u5F00")])),_:1})):z("",!0)]),_:1})]),_:1},8,["model"])]),_:1})):z("",!0),["OWNER","ADMIN"].includes(I.value.teamRole)?(E(),V(se,{key:2,label:"\u56E2\u961F\u8BBE\u7F6E",name:"settings"},{default:t(()=>[l("div",qt,[e(Ae,null,{default:t(()=>[e(o(ze))]),_:1}),u[37]||(u[37]=B("\xA0 ")),u[38]||(u[38]=l("span",null,"\u57FA\u672C\u4FE1\u606F",-1))]),l("div",Ht,[e(fe,{ref:"ruleFormRef",model:w.value,"label-position":"right","label-width":"120px",size:"large",class:"login-basic-form"},{default:t(()=>[e(Y,{prop:"teamName",label:"\u56E2\u961F\u540D\u79F0"},{default:t(()=>[e(ie,{modelValue:w.value.teamName,"onUpdate:modelValue":u[15]||(u[15]=p=>w.value.teamName=p),modelModifiers:{trim:!0},placeholder:"\u8BF7\u8F93\u5165\u56E2\u961F\u540D\u79F0",class:"some-input",disabled:W.value},{suffix:t(()=>[e($,{type:W.value?"":"primary",onClick:u[14]||(u[14]=p=>Q())},{default:t(()=>[B(R(W.value?"\u7F16\u8F91":"\u4FDD\u5B58"),1)]),_:1},8,["type"])]),_:1},8,["modelValue","disabled"])]),_:1}),e(Y,{prop:"teamNickname",label:"\u6211\u7684\u56E2\u961F\u5185\u6635\u79F0"},{default:t(()=>[e(ie,{modelValue:w.value.teamNickname,"onUpdate:modelValue":u[17]||(u[17]=p=>w.value.teamNickname=p),modelModifiers:{trim:!0},placeholder:"\u8BF7\u8F93\u5165\u56E2\u961F\u5185\u6635\u79F0\uFF0C\u4FBF\u4E8E\u534F\u4F5C",class:"some-input",disabled:S.value},{suffix:t(()=>[e($,{type:S.value?"":"primary",onClick:u[16]||(u[16]=p=>U())},{default:t(()=>[B(R(S.value?"\u7F16\u8F91":"\u4FDD\u5B58"),1)]),_:1},8,["type"])]),_:1},8,["modelValue","disabled"])]),_:1})]),_:1},8,["model"])]),l("div",Yt,[e(Ae,null,{default:t(()=>[e(o(At))]),_:1}),u[39]||(u[39]=B("\xA0 ")),u[40]||(u[40]=l("span",null,"\u5371\u9669\u533A\u57DF",-1)),u[41]||(u[41]=l("span",{style:{color:"#c8c9cc","font-size":"10px"}},"\uFF08\u53EA\u6709\u56E2\u961F\u6240\u6709\u8005\u624D\u80FD\u64CD\u4F5C\uFF09",-1))]),l("div",Qt,[e(fe,{ref:"ruleFormRef",model:w.value,"label-position":"right","label-width":"120px",size:"large",class:"login-basic-form"},{default:t(()=>[e(Y,{prop:"teamName",label:"\u79FB\u4EA4"},{default:t(()=>[e(Qe,{modelValue:w.value.ownerUid,"onUpdate:modelValue":u[18]||(u[18]=p=>w.value.ownerUid=p),placeholder:"\u5C06\u56E2\u961F\u7684\u6240\u6709\u8005\u6743\u9650\u79FB\u4EA4\u7ED9\u5176\u4ED6\u6210\u5458",style:{width:"100%"},onChange:G,disabled:I.value.teamRole!=="OWNER"},{default:t(()=>[(E(!0),N(ne,null,Le(H.value,p=>(E(),V(Ye,{key:p.uid,label:(p.teamNickname?p.teamNickname:p.nickname)+" (@"+p.nickname+")",value:p.uid},null,8,["label","value"]))),128))]),_:1},8,["modelValue","disabled"])]),_:1}),e(Y,{prop:"teamNickname",label:"\u89E3\u6563\u56E2\u961F"},{default:t(()=>[e(ie,{placeholder:"\u52A1\u5FC5\u8C28\u614E\uFF0C\u89E3\u6563\u540E\u65E0\u6CD5\u627E\u56DE",class:"some-input",disabled:""},{suffix:t(()=>[e($,{type:"warning",onClick:u[19]||(u[19]=p=>je(A.value.name)),disabled:I.value.teamRole!=="OWNER"},{default:t(()=>u[42]||(u[42]=[B("\u89E3\u6563")])),_:1},8,["disabled"])]),_:1})]),_:1})]),_:1},8,["model"])])]),_:1})):z("",!0)]),_:1},8,["modelValue"]),e(K,{visible:o(s).visible,"onUpdate:visible":u[21]||(u[21]=p=>o(s).visible=p),width:"700px",title:o(s).title,footer:!1},{default:t(()=>[e(Lt,{uid:o(s).uid,isSelf:I.value.uid===o(s).uid,loginUserTeamRole:I.value.teamRole,onFormResponse:L,key:"add-teamMemberInfo"},null,8,["uid","isSelf","loginUserTeamRole"])]),_:1},8,["visible","title"])],64)}}});var Kt=ue(Jt,[["__scopeId","data-v-1d78395c"]]);const Xt={class:"me-info"},Zt={style:{display:"flex","align-items":"center"}},el={key:0},ul=P({__name:"MeForm",setup(n){const i=ee(),s=ku(),a=C({}),f=C(!1),F=C(!1);function y(){if(f.value){if(!a.value.teamNickname){j.warning("\u8BF7\u8F93\u5165\u56E2\u961F\u6635\u79F0");return}c()}f.value=!f.value}function A(){return T(this,null,function*(){try{F.value=!0;const{data:x}=yield Se({teamId:i.getActiveTeamId});a.value=x}finally{F.value=!1}})}A();function c(){return T(this,null,function*(){let x={teamId:i.getActiveTeamId,teamNickname:a.value.teamNickname};const h=X(x),{data:v}=yield Ue(h);v&&j.success("\u4FDD\u5B58\u6210\u529F")})}return(x,h)=>{var m;const v=r("el-avatar"),g=r("el-button"),_=r("el-input"),d=r("el-tag"),w=Fe("loading");return _e((E(),N("table",Xt,[l("tr",null,[h[1]||(h[1]=l("td",null,"\u4E2A\u4EBA\u5934\u50CF",-1)),l("td",null,[l("div",Zt,[e(v,{src:((m=o(s).getUserInfo)==null?void 0:m.avatar)||o(Nu)},null,8,["src"])])])]),l("tr",null,[h[2]||(h[2]=l("td",null,"\u56E2\u961F\u6635\u79F0",-1)),l("td",null,[f.value?z("",!0):(E(),N("div",el,[l("span",null,R(a.value.teamNickname),1),e(g,{class:"ml-4",type:"primary",icon:o(Yu),link:"",onClick:y},null,8,["icon"])])),f.value?(E(),V(_,{key:1,modelValue:a.value.teamNickname,"onUpdate:modelValue":h[0]||(h[0]=I=>a.value.teamNickname=I),modelModifiers:{trim:!0},placeholder:"\u8BF7\u8F93\u5165\u56E2\u961F\u6635\u79F0 (\u5FC5\u586B)",clearable:"",maxlength:"20","show-word-limit":""},{append:t(()=>[e(g,{icon:o(Vu),onClick:y},null,8,["icon"])]),_:1},8,["modelValue"])):z("",!0)])]),l("tr",null,[h[3]||(h[3]=l("td",null,"\u6240\u5728\u56E2\u961F",-1)),l("td",null,R(a.value.name),1)]),l("tr",null,[h[4]||(h[4]=l("td",null,"\u56E2\u961F\u89D2\u8272",-1)),l("td",null,[e(d,{type:"primary"},{default:t(()=>[B(R(a.value.teamRole==="OWNER"?"\u6240\u6709\u8005":a.value.teamRole==="ADMIN"?"\u7BA1\u7406\u5458":"\u666E\u901A\u6210\u5458"),1)]),_:1})])]),l("tr",null,[h[5]||(h[5]=l("td",null,"\u52A0\u5165\u65F6\u95F4",-1)),l("td",null,R(a.value.joinTime),1)])])),[[w,F.value]])}}});var tl=ue(ul,[["__scopeId","data-v-ba3a47d0"]]);function ll(){const n=oe({visible:!1,title:"\u6DFB\u52A0\u6210\u5458",type:"add"});function i(a="\u6DFB\u52A0\u6210\u5458",f="add"){n.type=f,n.title=a,n.visible=!0}function s(a){a&&console.log("\u64CD\u4F5C\u6210\u529F\u540E..."),n.visible=!1}return{memberData:n,handleMemberVisible:i,handleMemberRes:s}}function al(){const n=oe({visible:!1,title:"\u4E2A\u4EBA\u8D44\u6599",type:"add"});function i(a="\u4E2A\u4EBA\u8D44\u6599",f="add"){n.type=f,n.title=a,n.visible=!0}function s(a){a&&console.log("\u64CD\u4F5C\u6210\u529F\u540E..."),n.visible=!1}return{meData:n,handleMeVisible:i,handleMeRes:s}}const nl={class:"single-bottom-container"},ol=P({__name:"TeamBottom",setup(n){$u();const i=J($e,{direction:"vertical"}),{memberData:s,handleMemberVisible:a,handleMemberRes:f}=ll(),{teamInfoData:F,handleTeamInfoVisible:y,handleTeamInfoRes:A}=Dt(),{meData:c,handleMeVisible:x,handleMeRes:h}=al();return(v,g)=>{const _=r("el-button"),d=r("el-popover"),w=r("el-space");return E(),N(ne,null,[l("div",nl,[e(o($e)),e(w,{size:0,spacer:o(i)},{default:t(()=>[e(_,{type:"primary",text:"",icon:o(Ft),onClick:g[0]||(g[0]=m=>o(a)())},{default:t(()=>g[6]||(g[6]=[B("\u9080\u8BF7\u6210\u5458")])),_:1},8,["icon"]),e(d,{placement:"right",width:90,trigger:"click"},{reference:t(()=>[e(_,{type:"primary",text:"",icon:o(nt)},{default:t(()=>g[7]||(g[7]=[B("\u66F4\u591A")])),_:1},8,["icon"])]),default:t(()=>[e(_,{type:"primary",text:"",icon:o(ze),style:{width:"100%"},onClick:g[1]||(g[1]=m=>o(y)())},{default:t(()=>g[8]||(g[8]=[B("\u56E2\u961F\u4FE1\u606F")])),_:1},8,["icon"]),e(_,{type:"primary",text:"",icon:o(Wu),style:{"margin-left":"0px",width:"100%"},onClick:g[2]||(g[2]=m=>o(x)())},{default:t(()=>g[9]||(g[9]=[B("\u4E2A\u4EBA\u8D44\u6599")])),_:1},8,["icon"])]),_:1})]),_:1},8,["spacer"])]),e(K,{visible:o(s).visible,"onUpdate:visible":g[3]||(g[3]=m=>o(s).visible=m),width:"600px",title:o(s).title,footer:!1},{default:t(()=>[e(Tt,{onFormResponse:o(f),key:"add-member"},null,8,["onFormResponse"])]),_:1},8,["visible","title"]),e(K,{visible:o(F).visible,"onUpdate:visible":g[4]||(g[4]=m=>o(F).visible=m),width:"700px",title:o(F).title,footer:!1},{default:t(()=>[e(Kt,{onFormResponse:o(A),key:"add-teamInfo"},null,8,["onFormResponse"])]),_:1},8,["visible","title"]),e(K,{visible:o(c).visible,"onUpdate:visible":g[5]||(g[5]=m=>o(c).visible=m),width:"500px",title:o(c).title,footer:!1},{default:t(()=>[e(tl,{onFormResponse:o(h),key:"add-meInfo"},null,8,["onFormResponse"])]),_:1},8,["visible","title"])],64)}}});var sl=ue(ol,[["__scopeId","data-v-6b92602a"]]);const il={key:0,class:"team-files-container flex"},dl={class:"left-menu h-full"},rl={style:{display:"flex","justify-content":"space-between","align-items":"baseline"}},ml={class:"space-menu"},pl={class:"right-layout h-full flex-1"},cl=P({__name:"Team",setup(n){const{folderData:i,handleFolderVisible:s,handleFolderRes:a}=au(),{websiteData:f,handleWebsiteVisible:F,handleWebsiteRes:y}=nu(),{teamSpaceData:A,handleTeamSpaceVisible:c,handleTeamSpaceRes:x}=ht(),{getAddMenuList:h}=ou(),v=ee(),{handleFolderMenuChange:g}=Ze(),_=C([]),d=C([]),w=C(!1);De("handleUpdateTeamSpaceList",W),De("handleChangeLoadingStatus",H);function m(D){switch(D.key){case xe.ADD_FOLDER:s(D.text);break;case xe.ADD_WEBSITE:F(D.text);break}}function I(D){g(D)}function H(D){w.value=D}Re(_,(D,k)=>{if(!v.getActiveMenu){v.setActiveMenu(D[0]);return}let M=Mu.find(L=>L==v.getActiveMenu.value);(M==null||M==null)&&v.setActiveMenu(D[0])}),Re(()=>v.getActiveTeamId,()=>{v.getActiveTeamId&&v.getActiveTeamType==="TEAM"&&(W(),S())},{immediate:!0});function W(){return T(this,null,function*(){const{data:D}=yield yu({teamId:v.getActiveTeamId});let k=D.map((M,L)=>{let Q=M.spaceType=="PUBLIC"?"space-public":"space-private",U=M.spaceType=="PUBLIC"?ae.PUBLIC_SPACE:ae.OTHER_SPACE;return{icon:Q,logoUrl:M.logoUrl||"",text:M.name,desc:M.desc,showWatermark:M.showWatermark,value:U,spaceId:M.spaceId,spaceType:M.spaceType}});d.value=k})}function S(){return T(this,null,function*(){let D=[Tu,Du];const{data:k}=yield Au({teamId:v.getActiveTeamId});let M={icon:"menu-self-file",text:k.name,value:ae.MY_SPACE,spaceId:k.spaceId};D.push(M),_.value=D})}return(D,k)=>{const M=r("el-button"),L=r("el-divider"),Q=r("el-tooltip"),U=r("el-scrollbar"),G=Fe("loading");return E(),N(ne,null,[o(v).getActiveMenu?(E(),N("div",il,[l("div",dl,[e(eu,{dropMenuList:o(h),onMenuEvent:m},{default:t(()=>[e(M,{type:"primary",class:"drop-add-folder w-full"},{default:t(()=>k[4]||(k[4]=[B("\u65B0\u5EFA")])),_:1})]),_:1},8,["dropMenuList"]),e(Te,{defaultValue:o(v).getActiveMenu.value,defaultSpaceId:o(v).getActiveMenu.spaceId,menus:_.value,class:"mt-5",onHandleChange:I},null,8,["defaultValue","defaultSpaceId","menus"]),e(L),l("div",null,[l("div",rl,[k[6]||(k[6]=l("span",{style:{color:"#6c7d8f"}},"\u56E2\u961F\u7A7A\u95F4",-1)),e(Q,{effect:"dark",content:"\u65B0\u5EFA\u56E2\u961F\u7A7A\u95F4",placement:"bottom"},{default:t(()=>[e(M,{link:"",size:"large",onClick:k[0]||(k[0]=q=>o(c)("\u521B\u5EFA\u7A7A\u95F4"))},{default:t(()=>k[5]||(k[5]=[B("+")])),_:1})]),_:1})]),l("div",ml,[e(U,null,{default:t(()=>[e(Te,{defaultValue:o(v).getActiveMenu.value,defaultSpaceId:o(v).getActiveMenu.spaceId,menus:d.value,onHandleChange:I},null,8,["defaultValue","defaultSpaceId","menus"])]),_:1})])]),e(sl)]),_e((E(),N("div",pl,[o(v).getActiveMenu.value==o(ae).MY_COMMON_USE.valueOf()||o(v).getActiveMenu.value==o(ae).RECENT_OPEN.valueOf()?(E(),V(Iu,{key:0})):(E(),V(xu,{key:1}))])),[[G,w.value]])])):z("",!0),e(K,{visible:o(i).visible,"onUpdate:visible":k[1]||(k[1]=q=>o(i).visible=q),title:o(i).title,footer:!1},{default:t(()=>[e(su,{onFormResponse:o(a),key:"add-form"},null,8,["onFormResponse"])]),_:1},8,["visible","title"]),e(K,{visible:o(f).visible,"onUpdate:visible":k[2]||(k[2]=q=>o(f).visible=q),width:"600px",title:o(f).title,footer:!1},{default:t(()=>[e(iu,{onFormResponse:o(y),key:"add-website"},null,8,["onFormResponse"])]),_:1},8,["visible","title"]),e(K,{visible:o(A).visible,"onUpdate:visible":k[3]||(k[3]=q=>o(A).visible=q),width:"400px",title:o(A).title,footer:!1},{default:t(()=>[e(Bt,{onFormResponse:o(x),key:"add-website"},null,8,["onFormResponse"])]),_:1},8,["visible","title"])],64)}}});var $l=ue(cl,[["__scopeId","data-v-28771c80"]]);export{$l as default};
//# sourceMappingURL=Team.b6072d27.js.map

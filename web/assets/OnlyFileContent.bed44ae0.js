var j=(E,b,y)=>new Promise((i,u)=>{var l=d=>{try{m(y.next(d))}catch(C){u(C)}},a=d=>{try{m(y.throw(d))}catch(C){u(C)}},m=d=>d.done?i(d.value):Promise.resolve(d.value).then(l,a);m((y=y.apply(E,b)).next())});import{d as H,g as k,o as s,l as h,k as p,P as D,f as e,a3 as X,i as r,t as V,h as T,m as B,_ as te,a as ae,e as F,w as v,j as x,B as Z,ay as ye,F as z,az as ge,r as O,aA as be,ad as ke,D as de,a7 as q,av as G,c as ce,s as me,q as Ce}from"./index.dcc91eec.js";import{u as oe,D as K,_ as pe,b as Me,S as $,h as Se,a as ve}from"./useMouseEvent.a5418e8d.js";import{u as ie}from"./files.d698779e.js";import{b as ee,_ as we,a as le,u as se}from"./useEmitter.63415644.js";import{D as re,u as Ee}from"./useFiles.042f9960.js";import{a as Ie,u as Te,_ as Ae,r as Le,s as Fe,t as Oe}from"./useCloneMove.8e454083.js";import{g as ue}from"./form.8bf32b71.js";import{M as Q,a as Be,t as $e}from"./menuValueEnum.ea7dad60.js";import{g as Ue}from"./team.611cb9ab.js";const De=["title"],Ve=H({__name:"Folder",props:{folderItem:{},itemMenuList:{},canClick:{type:Boolean}},emits:["handleFolderClick"],setup(E,{emit:b}){const y=b,i=E,u=ie(),{getStartItem:l,getEnterId:a,getEnterType:m,handleMousedown:d,handleMouseenter:C,handleMouseleave:M,handleMousemove:S}=oe();function f(t){t.dataType!==K.FOLDER||!i.canClick||(u.setFolderBreadcrumb(t),y("handleFolderClick"),ee("handleUpdateListByPid",t.id))}return(t,n)=>{const _=k("SvgIcon");return s(),h("div",null,[p("span",{class:D(["interspace",{"enter-type":e(m)==="interspace"&&e(a)===t.folderItem.id&&e(l).id!==e(a)&&e(l).dataType!==e(K).WEBSITE}]),onMousemove:n[0]||(n[0]=o=>e(S)(t.folderItem,o,"interspace"))},null,34),p("div",{class:D(["menu-folder-item",{enter:e(a)===t.folderItem.id&&e(l).id&&e(l).id!==e(a),opacity:e(l).id&&e(l).id===t.folderItem.id&&e(l).id!==e(a)}]),onMousedown:n[2]||(n[2]=o=>e(d)(t.folderItem,o,t.getFolderList)),onMousemove:n[3]||(n[3]=o=>e(S)(t.folderItem,o)),onMouseenter:n[4]||(n[4]=X(o=>e(C)(t.folderItem),["stop","prevent"])),onMouseleave:n[5]||(n[5]=o=>e(M)(t.folderItem))},[p("span",{class:"flex items-center",onClick:n[1]||(n[1]=X(o=>f(t.folderItem),["stop","prevent"]))},[r(_,{name:"list-folder",size:22}),p("span",{class:"ml-2",title:t.folderItem.name},V(t.folderItem.name),9,De)]),t.itemMenuList?(s(),T(pe,{key:0,itemData:t.folderItem,ikey:t.folderItem.id,itemMenuList:t.itemMenuList,class:"menu-drop"},null,8,["itemData","ikey","itemMenuList"])):B("",!0)],34)])}}});var Ne=te(Ve,[["__scopeId","data-v-2dcce61f"]]);const xe={class:"flex items-center"},ze={class:"website-logo"},Re={class:"website-p"},We=["title"],Pe=["title"],je=H({__name:"Website",props:{websiteItem:{},itemMenuList:{},showCheckbox:{type:Boolean},checkedState:{type:Boolean}},setup(E){const b=E,y=ae(),i=F(()=>{var n;if(!b.itemMenuList||b.itemMenuList.length==0)return null;if(((n=y.getActiveMenu)==null?void 0:n.value)==Q.MY_COMMON_USE.valueOf())return b.itemMenuList;let t=JSON.parse(JSON.stringify(b.itemMenuList));if(b.websiteItem.inCommonUse){const _=t.findIndex(o=>o.key==re.ADD_COMMON_USE);if(_!==-1){let o=t[_];o.icon="menu-unstar",o.text="\u79FB\u51FA\u6211\u7684\u5E38\u7528",o.key=re.REMOVE_COMMON_USE,t[_]=o}}return t}),{getStartItem:u,getEnterId:l,getEnterType:a,handleMousedown:m,handleMouseenter:d,handleMouseleave:C,handleMousemove:M}=oe();function S(t){f(t.id),window.open(t.url)}function f(t){return j(this,null,function*(){const _=ue({navId:t});yield Ie(_)})}return(t,n)=>{const _=k("SvgIcon"),o=k("el-image"),A=k("el-checkbox");return s(),h("div",null,[p("span",{class:D(["interspace",{"enter-type":e(a)==="interspace"&&e(l)===t.websiteItem.id&&e(u).id!==e(l)}]),onMousemove:n[0]||(n[0]=w=>e(M)(t.websiteItem,w,"interspace"))},null,34),p("div",{class:D(["menu-website-item",{"menu-website-item--disabled":t.checkedState,enter:e(l)&&e(l)===t.websiteItem.id&&e(u).id&&e(u).id!==e(l)&&e(u).dataType!==e(K).WEBSITE,opacity:e(u).id&&e(u).id===t.websiteItem.id&&e(u).id!==e(l)}]),onMousedown:n[2]||(n[2]=w=>e(m)(t.websiteItem,w,t.getWebsiteList)),onMousemove:n[3]||(n[3]=w=>e(M)(t.websiteItem,w)),onMouseenter:n[4]||(n[4]=X(w=>e(d)(t.websiteItem),["stop","prevent"])),onMouseleave:n[5]||(n[5]=w=>e(C)(t.websiteItem)),onClick:n[6]||(n[6]=w=>S(t.websiteItem))},[p("div",xe,[p("div",ze,[r(o,{src:t.websiteItem.logo},{error:v(()=>[r(_,{name:"list-website",size:45})]),_:1},8,["src"])]),p("div",Re,[p("p",{title:t.websiteItem.name},V(t.websiteItem.name),9,We),p("p",{title:t.websiteItem.desc},V(t.websiteItem.desc),9,Pe)])]),i.value?(s(),T(pe,{key:0,itemData:t.websiteItem,ikey:t.websiteItem.id,itemMenuList:e(i.value),class:D(["menu-drop",{"menu-drop--disabled":t.checkedState}])},null,8,["itemData","ikey","itemMenuList","class"])):B("",!0),t.showCheckbox?(s(),h("div",{key:1,onClick:n[1]||(n[1]=X(()=>{},["stop"]))},[r(A,{class:D(["item-checkbox",{"item-opc-checkbox":t.checkedState}]),label:t.websiteItem.id},{default:v(()=>n[7]||(n[7]=[x(V(""))])),_:1},8,["class","label"])])):B("",!0)],34)])}}});var fe=te(je,[["__scopeId","data-v-924031dc"]]);const He=["onMouseenter","onMouseleave"],Ye=H({__name:"Breadcrumb",emits:["handleBreadcrumbClick"],setup(E,{emit:b}){const y=ie(),i=b,u=F(()=>y.getFolderBreadcrumb);function l(M){y.setFolderBreadcrumb(M),i("handleBreadcrumbClick",M.id)}const{getEnterId:a,getStartItem:m,handleMouseenter:d,handleMouseleave:C}=oe();return(M,S)=>(s(),T(e(ge),{class:"list-breadcrumb","separator-icon":e(Me)},{default:v(()=>[(s(!0),h(z,null,Z(u.value,(f,t)=>(s(),T(e(ye),{class:D(["cursor-pointer",[{"cursor-default":t>0&&t===u.value.length-1}]]),key:f.id,onClick:n=>l(f)},{default:v(()=>[p("span",{class:D(["breadcrumb-span",{enter:t!==u.value.length-1&&e(m).id&&e(a)===f.id}]),onMouseenter:n=>e(d)(f),onMouseleave:n=>e(C)(f)},V(f.name),43,He)]),_:2},1032,["class","onClick"]))),128))]),_:1},8,["separator-icon"]))}});function Ke(){return{getSortTypes:[{value:$.CREATE_TIME,label:"\u521B\u5EFA\u65F6\u95F4"},{value:$.LAST_UPDATE_TIME,label:"\u6700\u540E\u4FEE\u6539\u65F6\u95F4"},{value:$.TITLE,label:"\u6807\u9898"},{value:$.TYPE,label:"\u7C7B\u578B"},{value:$.CUSTOM,label:"\u81EA\u5B9A\u4E49\u6392\u5E8F"}]}}const Je={class:"actions-bar flex items-center"},Qe={key:1,class:"flex items-center action-icon"},J=18,qe=H({__name:"index",props:{sortType:{default:$.CUSTOM}},emits:["handleClearAll","handleSearch","handleSort"],setup(E,{emit:b}){const y=E,i=b,u=O(null),l=O(""),a=O(!1),{getFolderMenu:m,getActionFileListType:d,handleSetActionFileListType:C}=Ee(),M=F(()=>e(m)===2),S=F(()=>e(m)===0),f=F(()=>e(m)===0),{getSortTypes:t}=Ke(),n=O(y.sortType);function _(){i("handleClearAll")}function o(){a.value=!a.value,a.value&&u.value&&u.value.focus()}be(u,()=>{u.value&&u.value.blur(),a.value=!1});function A(){console.log("handleSearch:",l.value),i("handleSearch",l.value)}function w(){console.log("handleSort:",n.value),i("handleSort",n.value)}function N(R){C(R)}return(R,I)=>{const W=k("SvgIcon"),Y=k("el-tooltip"),ne=k("el-input"),c=k("el-radio"),g=k("el-radio-group"),U=k("el-popover");return s(),h("div",Je,[M.value?(s(),T(Y,{key:0,content:"\u6E05\u7A7A\u56DE\u6536\u7AD9",placement:"bottom"},{default:v(()=>[r(W,{name:"action-delete",size:J,class:"action-icon",onClick:_})]),_:1})):B("",!0),S.value?(s(),h("div",Qe,[r(W,{name:"action-search",size:J,onClick:X(o,["stop"])}),r(ne,{ref_key:"actionSearch",ref:u,size:"small",modelValue:l.value,"onUpdate:modelValue":I[0]||(I[0]=L=>l.value=L),placeholder:"\u540D\u79F0\u67E5\u8BE2",class:D(["action-search",{show:a.value}]),clearable:"",onClear:A,onKeyup:ke(A,["enter"])},null,8,["modelValue","class"])])):B("",!0),f.value?(s(),T(U,{key:2,placement:"bottom",width:100,trigger:"click"},{reference:v(()=>[r(W,{name:"action-sort",size:J,class:"action-icon"})]),default:v(()=>[r(g,{modelValue:n.value,"onUpdate:modelValue":I[1]||(I[1]=L=>n.value=L),onChange:w},{default:v(()=>[p("div",null,[(s(!0),h(z,null,Z(e(t),L=>(s(),h("div",{class:"sort-item",key:L.value},[r(c,{label:L.value},{default:v(()=>[x(V(L.label),1)]),_:2},1032,["label"])]))),128))])]),_:1},8,["modelValue"])]),_:1})):B("",!0),e(d)==="list"?(s(),T(Y,{key:3,content:"\u89C6\u56FE",placement:"bottom"},{default:v(()=>[r(W,{name:"action-list",size:J,class:"action-icon",onClick:I[2]||(I[2]=L=>N("menu"))})]),_:1})):B("",!0),e(d)==="menu"?(s(),T(Y,{key:4,content:"\u89C6\u56FE",placement:"bottom"},{default:v(()=>[r(W,{name:"action-menu",size:J,class:"action-icon",onClick:I[3]||(I[3]=L=>N("list"))})]),_:1})):B("",!0)])}}});const Ge={class:"multiple-select-action flex items-center"},Xe={class:"mr-5"},Ze={class:"check-total"},et=H({__name:"index",props:{defaultChecked:{type:Boolean,default:!1},checkedTotal:{default:0},multipleList:{default:()=>[]}},emits:["close","checkAll"],setup(E,{emit:b}){const y=E,i=O(!1),u=O(0),{cloneMoveData:l,handleCloneMoveVisible:a,handleCloneMoveRes:m}=Te();de(()=>{i.value=y.defaultChecked,u.value=y.checkedTotal});const d=b;function C(t){d("checkAll",t)}function M(){a()}function S(){Se(y.multipleList,"\u6587\u4EF6\u6279\u91CF")}function f(){d("close")}return(t,n)=>{const _=k("el-checkbox"),o=k("el-button");return s(),h(z,null,[p("div",Ge,[r(_,{modelValue:i.value,"onUpdate:modelValue":n[0]||(n[0]=A=>i.value=A),label:"all",onChange:C},{default:v(()=>n[2]||(n[2]=[x(" \u5168\u9009 ")])),_:1},8,["modelValue"]),n[8]||(n[8]=p("span",{class:"split ml-2 mr-2"},"|",-1)),p("span",Xe,[n[3]||(n[3]=x(" \u5DF2\u9009\u62E9 ")),p("span",Ze,V(t.checkedTotal),1),n[4]||(n[4]=x(" \u9879 "))]),r(o,{size:"small",class:"ml-5",type:"primary",onClick:M},{default:v(()=>n[5]||(n[5]=[x("\u79FB\u52A8\u6216\u590D\u5236")])),_:1}),r(o,{size:"small",class:"ml-2",type:"danger",onClick:S},{default:v(()=>n[6]||(n[6]=[x("\u5220\u9664")])),_:1}),r(o,{size:"small",class:"ml-3",type:"info",onClick:f},{default:v(()=>n[7]||(n[7]=[x("\u53D6\u6D88\u6279\u91CF\u64CD\u4F5C")])),_:1})]),r(we,{visible:e(l).visible,"onUpdate:visible":n[1]||(n[1]=A=>e(l).visible=A),title:e(l).title,footer:!1},{default:v(()=>[r(Ae,{dataIds:t.multipleList,onFormResponse:e(m)},null,8,["dataIds","onFormResponse"])]),_:1},8,["visible","title"])],64)}}});var tt=te(et,[["__scopeId","data-v-56003520"]]);const nt={class:"list-header-section flex justify-between"},st={key:0,class:"w-full flex justify-between"},lt={key:1,class:"root-title"},at={class:"menu-view-container"},ot={key:0,class:"menu-scrollbar"},it={key:0,class:"menu-title"},ut={key:1,class:"menu-title"},rt={key:1,class:"menu-scrollbar flex justify-center items-center"},dt=H({__name:"TeamContent",setup(E){var Y,ne;const{commonFolderMenuList:b,commonWebsiteMenuList:y}=ve(),i=ae(),u=ie(),l=O((Y=q.get(G))!=null?Y:$.CUSTOM),a=O([]),m=O([]),d=ce({teamId:i.getActiveTeamId,spaceId:i.getActiveMenu.spaceId,pid:"root",search:"",sortType:(ne=q.get(G))!=null?ne:$.CUSTOM});F(()=>i.getActiveMenu.value);const C=F(()=>i.getActiveMenu.spaceId),M=F(()=>e(m).filter(c=>c.dataType===K.FOLDER)),S=F(()=>e(m).filter(c=>c.dataType===K.WEBSITE)),f=O({uid:"",hasAuthToEditSpace:!1});function t(c){let g=c;g!=null&&g.startsWith("root:")&&(g="root"),N(g)}function n(c){d.search=c,I()}function _(c){d.sortType=c,q.set(G,c),I()}function o(){se("handleUpdateTreeData")}function A(c){a.value=c?e(S).map(g=>g.id):[]}function w(){a.value=[]}function N(c){d.pid=c,I()}function R(){a.value=[]}le("handleUpdateList",I),le("handleUpdateListByPid",N),me(()=>{se("handleUpdateList"),se("handleUpdateListByPid")}),Ce(()=>i.getActiveMenu,()=>{a.value=[];let c="root",g=u.getFolderBreadcrumb;if(g&&g.length>0){let U=g[g.length-1].id;U!=null&&U.startsWith("root")||(c=U)}W(),N(c)},{immediate:!0});function I(){return j(this,null,function*(){if(!!$e.includes(i.getActiveMenu.value)){ee("handleChangeLoadingStatus",!0);try{d.spaceId=e(C);const c=ue(d),{data:g}=yield Le(c);m.value=g.folders.concat(g.files)}finally{ee("handleChangeLoadingStatus",!1)}}})}function W(){return j(this,null,function*(){const{data:c}=yield Ue(i.getActiveTeamId,e(C));f.value.hasAuthToEditSpace=c.hasAuthToEditSpace,f.value.uid=c.uid})}return(c,g)=>{const U=k("el-col"),L=k("el-row"),_e=k("el-checkbox-group"),he=k("el-empty");return s(),h(z,null,[p("div",nt,[a.value.length===0?(s(),h("div",st,[e(Be).includes(e(i).getActiveMenu.value)?(s(),T(Ye,{key:0,onHandleBreadcrumbClick:t})):(s(),h("span",lt,V(e(i).getActiveMenu.text),1)),r(qe,{onHandleClearAll:c.handleClearAll,onHandleSearch:n,onHandleSort:_,sortType:l.value},null,8,["onHandleClearAll","sortType"])])):(s(),T(tt,{key:1,multipleList:a.value,defaultChecked:a.value.length===S.value.length,checkedTotal:a.value.length,onCheckAll:A,onClose:w},null,8,["multipleList","defaultChecked","checkedTotal"]))]),p("div",at,[m.value.length>0?(s(),h("div",ot,[M.value.length>0?(s(),h("p",it,"\u6587\u4EF6\u5939")):B("",!0),r(L,{gutter:15},{default:v(()=>[(s(!0),h(z,null,Z(M.value,P=>(s(),T(U,{key:P.id,class:"relative",xs:8,sm:6,md:4,lg:3,xl:3},{default:v(()=>[r(Ne,{"folder-item":P,"can-click":!0,"item-menu-list":e(b)(f.value.hasAuthToEditSpace),onHandleFolderClick:R},null,8,["folder-item","item-menu-list"])]),_:2},1024))),128))]),_:1}),S.value.length>0?(s(),h("p",ut,"\u6587\u4EF6")):B("",!0),r(_e,{modelValue:a.value,"onUpdate:modelValue":g[0]||(g[0]=P=>a.value=P),onChange:o},{default:v(()=>[r(L,{gutter:15},{default:v(()=>[(s(!0),h(z,null,Z(S.value,P=>(s(),T(U,{key:P.id,class:"relative",xs:12,sm:8,md:6,lg:4,xl:4},{default:v(()=>[r(fe,{"item-menu-list":e(y)(f.value.hasAuthToEditSpace),"website-item":P,"show-checkbox":f.value.hasAuthToEditSpace,"checked-state":a.value.length>0},null,8,["item-menu-list","website-item","show-checkbox","checked-state"])]),_:2},1024))),128))]),_:1})]),_:1},8,["modelValue"])])):(s(),h("div",rt,[r(he,{description:"\u7A7A\u7A7A\u5982\u4E5F"})]))])],64)}}});var Tt=te(dt,[["__scopeId","data-v-d382bc38"]]);const ct={class:"list-header-section flex justify-between"},mt={class:"w-full flex justify-between"},pt={class:"root-title"},vt={class:"menu-view-container"},ft={key:0,class:"menu-scrollbar"},_t={key:1,class:"menu-scrollbar flex justify-center items-center"},ht=H({__name:"OnlyFileContent",setup(E){var t,n;const{commonUseMenuList:b,recentOpenMenuList:y}=ve(),i=ae(),u=O((t=q.get(G))!=null?t:$.CUSTOM),l=O([]),a=ce({teamId:i.getActiveTeamId,spaceId:i.getActiveMenu.spaceId,pid:"root",search:"",sortType:(n=q.get(G))!=null?n:$.CUSTOM}),m=F(()=>i.getActiveMenu.value),d=F(()=>{if(e(m)==Q.MY_COMMON_USE.valueOf())return b;if(e(m)==Q.RECENT_OPEN.valueOf())return y}),C=F(()=>e(l).filter(_=>_.dataType===K.WEBSITE));function M(){return j(this,null,function*(){try{ee("handleChangeLoadingStatus",!0),e(m)==Q.MY_COMMON_USE.valueOf()&&(yield S()),e(m)==Q.RECENT_OPEN.valueOf()&&(yield f())}finally{ee("handleChangeLoadingStatus",!1)}})}le("handleUpdateList",M),me(()=>{se("handleUpdateList")}),de(()=>{M()});function S(){return j(this,null,function*(){const _=ue(a),{data:o}=yield Fe(_);l.value=o.folders.concat(o.files),u.value=o.sortType})}function f(){return j(this,null,function*(){const _={teamId:i.getActiveTeamId},{data:o}=yield Oe(_);l.value=o.folders.concat(o.files)})}return(_,o)=>{const A=k("el-col"),w=k("el-row"),N=k("el-empty");return s(),h(z,null,[p("div",ct,[p("div",mt,[p("span",pt,V(e(i).getActiveMenu.text),1)])]),p("div",vt,[l.value.length>0?(s(),h("div",ft,[r(w,{gutter:15},{default:v(()=>[(s(!0),h(z,null,Z(C.value,R=>(s(),T(A,{key:R.id,class:"relative",xs:12,sm:8,md:6,lg:4,xl:4},{default:v(()=>[r(fe,{"item-menu-list":d.value,"website-item":R,"show-checkbox":!1},null,8,["item-menu-list","website-item"])]),_:2},1024))),128))]),_:1})])):(s(),h("div",_t,[r(N,{description:"\u7A7A\u7A7A\u5982\u4E5F"})]))])],64)}}});var At=te(ht,[["__scopeId","data-v-72054a42"]]);export{Ne as F,tt as M,At as O,Tt as T,fe as W,qe as _,Ye as a};
//# sourceMappingURL=OnlyFileContent.bed44ae0.js.map
